# MNTask 功能指南

MNTask 是一个强大的 MarginNote 任务管理插件，基于 OKR 理念设计，提供了完整的任务创建、管理、筛选和分析功能。

## 📋 目录

1. [核心概念](#核心概念)
2. [任务类型系统](#任务类型系统)
3. [任务状态管理](#任务状态管理)
4. [今日任务系统](#今日任务系统)
5. [任务筛选与排序](#任务筛选与排序)
6. [批量操作功能](#批量操作功能)
7. [看板管理](#看板管理)
8. [任务分析与建议](#任务分析与建议)
9. [读书任务管理](#读书任务管理)
10. [快捷操作](#快捷操作)
11. [使用技巧](#使用技巧)
12. [常用工作流](#常用工作流)

## 核心概念

### 任务卡片格式
```
【类型｜状态】任务内容
```
- **类型**：目标、关键结果、项目、动作
- **状态**：未开始、进行中、已完成、已归档
- **路径**：显示任务层级关系（如：目标 >> 项目）

### 任务字段系统
每个任务卡片包含多个字段：
- **信息**：主字段，包含任务的基本信息
- **启动**：动作类型任务的启动方式（应用/URL）
- **所属**：链接到父任务
- **状态子字段**：📅 今日、🔥 优先级、⏰ 计划时间等

## 任务类型系统

### 1. 目标 (Objective) 🎯
- **用途**：定义要实现的大方向
- **示例**：【目标｜未开始】提升产品用户体验
- **特点**：
  - 通常是季度或年度目标
  - 包含多个关键结果
  - 颜色：深绿色

### 2. 关键结果 (Key Result) 📊
- **用途**：衡量目标完成度的具体指标
- **示例**：【关键结果｜进行中】用户满意度提升到 90%
- **特点**：
  - 必须可量化
  - 有明确的完成标准
  - 颜色：橙色

### 3. 项目 (Project) 📁
- **用途**：实现关键结果的具体项目
- **示例**：【项目｜进行中】重构用户界面
- **特点**：
  - 包含多个具体动作
  - 有明确的交付物
  - 颜色：蓝色

### 4. 动作 (Action) ⚡
- **用途**：可执行的具体任务
- **示例**：【动作｜未开始】设计新的导航栏
- **特点**：
  - 可以直接执行
  - 支持启动链接（应用/URL）
  - 颜色：黄色

## 任务状态管理

### 状态流转
```
未开始 😴 → 进行中 🔥 → 已完成 ✅ → 已归档 📦
```

### 状态说明
1. **未开始**：任务已创建但尚未开始
2. **进行中**：正在执行的任务
3. **已完成**：任务已完成但可能需要回顾
4. **已归档**：完全结束，存档备查

### 状态切换
- **单击**：向前切换状态（未开始→进行中→已完成→已归档）
- **长按菜单**：可以选择"退回上一个状态"

### 状态联动
- 子任务变为"进行中"时，父任务自动变为"进行中"
- 所有子任务完成时，系统会提示是否完成父任务

## 今日任务系统

### 标记今日任务
1. **单个标记**：选中任务 → 点击今日任务按钮
2. **批量标记**：选中多个任务 → 批量操作 → 批量标记为今日任务

### 今日任务字段
- **📅 今日 (YYYY-MM-DD)**：标记为今日要完成的任务（自动记录日期）
- **⚠️ 过期X天 (YYYY-MM-DD)**：标记过期未完成的任务
- **🔥 优先级**：高/中/低
- **⏰ 计划时间**：如 09:00、14:30

### 今日看板
- 自动收集所有标记为"今日"的任务
- 智能排序：优先级高的、时间早的排在前面
- 支持一键刷新，更新看板内容
- **过期检测**：自动检测并提示处理过期的今日任务

### 今日看板任务显示
从 v0.6.12 开始，今日看板采用**链接引用模式**，不再移动任务本身：
- **任务类型图标**：每个任务前显示类型图标，便于识别
  - 🎯 目标（Objective）
  - 📊 关键结果（Key Result）
  - 📁 项目（Project）
  - ▶️ 动作（Action）
- **优先级标记**：🔴高优先级、🟡中优先级、🟢低优先级
- **任务链接**：点击可直接跳转到原任务
- **自动统计**：显示任务总数、进行中、已完成等统计信息

**示例显示效果**：
```
## 🔴 高优先级
- ▶️🔴 09:00 [完成用户界面设计稿]
- 📁🔴 [重构用户界面项目]

## 🟡 中优先级  
- ▶️🟡 14:00 [编写单元测试]
- 📊🟡 [用户满意度提升到90%]

## 😴 未开始
- ▶️🟢 [整理会议纪要]
```

### 过期任务处理

从 v0.6.14 开始，MNTask 智能处理未完成的今日任务：

#### 自动检测
- 刷新今日看板时自动检测过期任务
- 过期任务指标记日期不是今天的"今日"任务
- 系统会记录任务被标记为"今日"的具体日期

#### 处理选项
1. **🔄 保持不变**：继续保留今日标记
2. **⚠️ 标记为过期**：改为"过期X天"标记，醒目提醒
3. **📅 更新为今天**：刷新日期，作为今天的任务
4. **❌ 移除标记**：取消今日标记
5. **📋 逐个处理**：对每个过期任务单独决定

#### 使用方法
- **刷新时处理**：刷新今日看板时自动提示
- **主动处理**：今日任务菜单 → 处理过期任务
- **批量操作**：支持一次处理所有过期任务

#### 最佳实践
- 每天早上刷新看板，及时处理昨日未完成任务
- 根据任务性质选择合适的处理方式
- 重要任务建议"更新为今天"继续跟进
- 已失效任务及时"移除标记"

### HTML 增强版今日看板（v0.7.3 新增）

MNTask v0.7.3 引入了基于 Web 技术的增强版今日看板，提供更现代化的任务管理体验。

#### 核心特性

1. **卡片化设计**
   - 每个任务以卡片形式展示，信息层次清晰
   - 优先级通过边框颜色区分（红/黄/绿）
   - 过期任务特殊标记，一目了然
   - 支持任务进度条显示

2. **智能分组**
   - **⚠️ 过期任务**：需要立即处理的逾期任务
   - **🔴 高优先级**：重要且紧急的任务
   - **🟡 中优先级**：常规推进的任务
   - **🟢 低优先级**：可以延后的任务
   - **😴 未开始**：尚未开始的任务

3. **实时统计**
   - 顶部统计栏显示关键指标
   - 今日任务总数、进行中、已完成数量
   - 自动计算并显示完成率
   - 数据实时更新

4. **快捷操作**
   - **状态更新**：一键推进任务状态
   - **快速启动**：直接启动任务关联的应用或文档
   - **查看详情**：在浮窗中显示完整任务信息
   - **导出数据**：生成任务报告并复制到剪贴板

#### 使用方法

1. **打开 HTML 看板**
   - 方法一：长按工具栏"看板视图"按钮 → 选择"🌐 HTML 今日看板"
   - 方法二：在看板菜单中选择"HTML 今日看板"选项

2. **操作任务**
   - 点击任务卡片查看详细信息
   - 使用卡片上的按钮快速操作
   - 通过顶部按钮刷新看板或切换排序方式

3. **数据导出**
   - 点击"导出数据"生成今日任务报告
   - 报告包含详细的任务统计和列表
   - 自动复制到剪贴板，方便分享

#### 技术亮点

- **响应式设计**：自适应不同屏幕尺寸
- **流畅动画**：卡片悬停、点击等交互动效
- **实时同步**：与 MarginNote 原生数据实时同步
- **原生集成**：支持所有原生任务操作

#### 与传统看板对比

| 特性 | 传统文本看板 | HTML 增强版 |
|------|-------------|------------|
| 视觉效果 | 纯文本列表 | 卡片化设计 |
| 信息密度 | 紧凑 | 适中，更易读 |
| 交互方式 | 需跳转操作 | 即时操作 |
| 统计信息 | 基础 | 丰富可视化 |
| 性能要求 | 低 | 中等 |

#### 注意事项

- HTML 看板需要加载 WebView，首次打开可能稍慢
- 保留原有文本看板作为备选方案
- 数据完全同步，两种看板可随时切换
- 建议在任务较多时使用 HTML 看板，获得更好的浏览体验

## 快速启动系统

MNTask v0.7.0 新增的快速启动功能，让你能够一键开始工作，专注于最重要的任务。

### 核心功能

#### 1. 一键启动任务
**使用方法**：单击"快速启动"按钮

**功能说明**：
- 自动获取今日看板中第一个进行中的任务
- 根据任务的"启动"字段智能处理：
  - **UI状态链接**：在浮窗中显示任务卡片内容，方便查看任务详情
  - **卡片链接**：直接定位到链接的卡片（如项目文档、参考资料）
  - **外部URL**：打开对应的应用或网页（如 Obsidian、Notion 等）
- 如果任务没有启动链接，会提示并定位到该任务

#### 2. 选择任务启动
**使用方法**：长按"快速启动"按钮 → 选择"选择并启动任务"

**功能说明**：
- 显示所有进行中任务的列表
- 每个任务显示优先级图标（🔴高/🟡中/⚪低）
- 有启动链接的任务会显示 🔗 图标
- 选择后根据链接类型进行相应处理

#### 3. 更新启动链接
**使用方法**：长按"快速启动"按钮 → 选择"更新启动链接"

**剪贴板智能识别**：
- **卡片ID**：32位字符串自动转换为卡片链接
- **MarginNote URL**：自动识别并使用
- **外部网址**：自动提取域名作为链接文本
- 如果剪贴板没有有效链接，显示应用选择对话框

**支持的应用**：
- Obsidian、Notion、Things、OmniFocus
- Bear、Craft、Logseq、RemNote、Roam
- 默认启动（MarginNote UI状态）

#### 4. 调整任务顺序
**使用方法**：长按"快速启动"按钮 → 选择"调整任务顺序"

**交互式排序界面**：
- 显示当前进行中任务列表
- 选择任务后可以：
  - ⬆️ 上移一位
  - ⬇️ 下移一位
  - ⏫ 移到顶部
  - ⏬ 移到底部
- 确认后保存排序，下次启动时按新顺序执行

### 使用场景

#### 场景1：每日开始工作
```
1. 打开 MarginNote
2. 单击"快速启动"按钮
3. 自动在浮窗显示今天最重要的任务
4. 开始专注工作
```

#### 场景2：多任务切换
```
1. 长按"快速启动"→"选择并启动任务"
2. 从列表中选择要切换的任务
3. 快速切换到新任务的工作环境
```

#### 场景3：关联外部工具
```
1. 复制 Obsidian 笔记链接
2. 长按"快速启动"→"更新启动链接"
3. 自动识别并保存链接
4. 下次单击即可打开 Obsidian 笔记
```

### 最佳实践

1. **为动作任务设置启动链接**
   - 编程任务：链接到 IDE 或代码仓库
   - 写作任务：链接到文档或笔记软件
   - 学习任务：链接到课程或教材

2. **合理安排任务优先级**
   - 高优先级任务自动排在前面
   - 使用手动排序微调执行顺序
   - 保持进行中任务数量在 3-5 个

3. **配合今日看板使用**
   - 每天早上刷新今日看板
   - 标记今日要完成的任务
   - 通过快速启动逐个执行

### 注意事项

- 启动链接格式：`[链接文本](URL)`
- 手动排序信息保存在"排序"字段中
- 排序优先级：手动排序 > 智能排序
- 浮窗显示适合查看任务详情和相关笔记

## 任务筛选与排序

### 预设筛选器
1. **🔥 重要且紧急**：高优先级 + 紧急度70分以上
2. **📅 今日任务**：标记了今日标签的任务
3. **⏰ 即将到期**：3天内到期的任务
4. **⚠️ 已逾期**：超过截止日期未完成
5. **📌 高优先级未完成**：高优先级且未完成的任务
6. **📊 本周任务**：本周内需要完成的任务
7. **🔍 停滞任务**：7天未更新的进行中任务
8. **✅ 待归档任务**：已完成但未归档的任务

### 自定义筛选
可以组合多个条件：
- 状态：未开始/进行中/已完成/已归档
- 优先级：高/中/低
- 标签：自定义标签
- 时间范围：指定起止日期
- 层级类型：顶层/叶子/父任务/独立任务

### 智能排序
**综合评分算法**：
- 优先级权重：30%
- 紧急度权重：30%
- 重要性权重：20%
- 进度权重：20%

**其他排序方式**：
- 按优先级排序
- 按日期排序（最早的在前）
- 按状态排序（进行中优先）
- 按层级排序（目标→动作）

## 批量操作功能

### 基础批量操作
1. **批量更新状态**：统一修改多个任务的状态
2. **批量设置优先级**：统一设置高/中/低优先级
3. **批量标记今日任务**：快速规划今日工作
4. **批量移动到看板**：整理任务到不同看板

### 高级批量操作
1. **批量添加标签**：为任务分组打标签
2. **批量设置截止日期**：统一设置 deadline
3. **批量归档已完成**：清理已完成的任务
4. **批量解除父任务链接**：解除任务间的关系

### 操作确认机制
- 重要操作会要求确认
- 显示操作结果：成功/失败数量
- 错误任务会记录原因

## 看板管理

### 看板类型
1. **目标看板**：存放所有目标
2. **项目看板**：存放所有项目
3. **动作看板**：存放具体动作
4. **已完成看板**：存放已完成任务
5. **今日看板**：存放今日任务

### 看板配置
在设置面板中可以：
- 绑定看板笔记
- 聚焦到指定看板
- 清空看板绑定
- 粘贴笔记 ID

### 看板使用流程
1. 创建一个笔记作为看板
2. 在设置中绑定该笔记
3. 任务会自动归类到对应看板
4. 支持手动移动任务到看板

## 多笔记本支持（v0.8.14+）

MNTask 从 v0.8.14 开始支持**多笔记本独立任务管理**，解决了不同设备、不同学习集之间的配置冲突问题。

### 核心特性

#### 1. 独立的任务看板
每个笔记本（学习集）都拥有独立的：
- 任务根目录卡片
- 目标看板、项目看板、动作看板等各类看板
- 今日任务列表
- 任务统计数据

#### 2. 智能配置同步
- **全局配置**（跨笔记本共享）：
  - 按钮设置和顺序
  - 自定义动作配置
  - 界面样式设置
  - 插件集成状态
  
- **笔记本配置**（每个笔记本独立）：
  - 任务根目录 ID
  - 各类看板绑定
  - 任务数据和状态

#### 3. 使用场景
这个功能特别适合以下场景：
- **多设备协作**：Mac 和 iPad 上使用不同的学习集
- **项目隔离**：不同项目使用独立的任务管理系统
- **团队协作**：每个团队成员有自己的任务看板
- **学习管理**：不同科目或课程独立管理

### 工作原理

#### iCloud 存储结构
```
iCloud 存储
├── MNTask_totalConfig          # 全局配置（按钮、样式等）
├── MNTask_notebook_[ID1]       # 笔记本1的任务配置
├── MNTask_notebook_[ID2]       # 笔记本2的任务配置
└── MNTask_notebook_[ID3]       # 笔记本3的任务配置
```

#### 自动迁移
- 首次使用新版本时，会自动将旧配置迁移到新格式
- 保持完全的向后兼容性
- 无需手动操作

### 使用指南

#### 1. 切换笔记本
当你切换到不同的笔记本时：
- 任务看板会自动切换到该笔记本的配置
- 今日任务数据会相应更新
- 所有任务操作都只影响当前笔记本

#### 2. 配置同步
- **自动同步**：开启 iCloud 同步后，配置会自动在设备间同步
- **选择性同步**：可以选择只同步全局配置或特定笔记本配置
- **冲突处理**：智能检测并提示配置冲突，让你选择保留哪个版本

#### 3. 今日看板
- 每个笔记本的今日看板独立统计
- 显示当前笔记本的任务数据
- 避免不同项目的任务混淆

### 最佳实践

1. **项目管理**
   - 为每个项目创建独立的笔记本
   - 在项目笔记本中设置专属的任务看板
   - 项目结束后可以归档整个笔记本

2. **学习管理**
   - 每门课程使用独立的笔记本
   - 设置课程专属的学习任务和进度
   - 不同课程的任务互不干扰

3. **团队协作**
   - 团队共享笔记本用于协作任务
   - 个人笔记本管理私人任务
   - 通过 iCloud 同步保持数据一致

### 注意事项

1. **笔记本 ID**：系统会自动获取当前笔记本 ID，无需手动配置
2. **数据安全**：每个笔记本的数据独立存储，互不影响
3. **性能优化**：只加载当前笔记本的任务数据，提高响应速度
4. **备份建议**：重要项目建议定期导出任务数据备份
5. **智能存储**（v0.8.15+）：只有在设置了看板绑定后才会创建笔记本配置，避免不必要的存储占用
6. **配置清理**（v0.8.16+）：可在高级设置中使用"清理空配置"功能，删除历史遗留的空配置文件
7. **重置配置**（v0.8.17+）：遇到严重配置错误时，可使用"⚠️ 重置所有配置"功能完全清除并重新开始

## 任务分析与建议

### 任务统计
自动统计：
- 任务总数
- 各状态任务数量
- 各优先级分布
- 逾期任务数
- 今日到期数

### 智能建议
系统会分析并建议：
1. **紧急任务**：需要立即处理的任务
2. **可开始任务**：没有依赖，可以开始的任务
3. **需回顾任务**：长时间停滞的任务
4. **可归档任务**：已完成可以归档的任务
5. **需规划任务**：高优先级但无日期的任务

### 任务依赖检查
- 自动检测任务间的依赖关系
- 提示哪些任务被阻塞
- 建议先完成的前置任务

## 读书任务管理

MNTask v0.6.12 引入了专为学生设计的**灵活读书任务拆分系统**，支持渐进式任务创建和动态调整。

### 核心特性

1. **渐进式拆分**：不一次性创建所有任务，避免计划僵化
2. **动态调整**：根据实际完成情况自动调整后续计划
3. **灵活策略**：支持章节拆分、页码拆分、学习模板等多种方式
4. **智能分析**：自动分析进度并提供优化建议

### 拆分方式详解

#### 1. 按章节拆分 📚

适用于有明确章节结构的书籍，支持多层级章节管理。

**使用方法**：
1. 选择要拆分的读书任务
2. 点击"任务拆分"按钮 → "按章节拆分"
3. 选择拆分方式：
   - **简单拆分**：输入章节范围（如1-10）
   - **章节结构**：支持子章节（开发中）
   - **学习模板**：使用预设的学习阶段

**示例效果**：
```
📁 【项目】阅读《深度学习》
├── ▶️ 【动作】阅读第1章
├── ▶️ 【动作】阅读第2章
├── ▶️ 【动作】阅读第3章
└── ...
```

#### 2. 按页码渐进式拆分 📄

最灵活的拆分方式，特别适合需要根据进度调整的情况。

**使用方法**：
1. 选择读书任务，点击"按页数拆分"
2. 输入书籍总页数（如500页）
3. 设置每日阅读页数（默认20页）
4. 选择创建策略：
   - 创建3天任务（推荐）✅
   - 创建5天任务
   - 创建7天任务
   - 创建所有任务

**关键特性**：
- **进度追踪**：自动记录当前页码进度
- **智能调整**：根据历史完成率调整每日页数
- **今日标记**：第一个任务自动标记为今日任务

**示例效果**：
```
📁 【项目】阅读《算法导论》
├── ▶️ 【动作】阅读 P1-20  📅今日 🔴高
├── ▶️ 【动作】阅读 P21-40  🟡中
├── ▶️ 【动作】阅读 P41-60  🟡中
└── 信息：进度: 0/500页 (0%)，预计还需25天完成
```

#### 3. 学习任务模板 📖

为不同类型的学习任务提供最佳实践模板。

**标准学习模板**：
1. 预读：浏览目录和概要（中优先级）
2. 精读：深入理解核心概念（高优先级）
3. 总结：整理笔记和要点（高优先级）
4. 复习：巩固关键知识（中优先级）
5. 应用：完成练习或项目（高优先级）

**技术学习模板**：
1. 概览：了解技术背景（低优先级）
2. 环境：搭建开发环境（高优先级）
3. 示例：运行官方示例（中优先级）
4. 实践：编写测试代码（高优先级）
5. 项目：完成小型项目（高优先级）
6. 总结：编写学习笔记（中优先级）

**考试准备模板**：
1. 诊断：做诊断测试（高优先级）
2. 基础：复习基础知识（高优先级）
3. 重点：攻克重难点（高优先级）
4. 练习：大量刷题（高优先级）
5. 模拟：全真模拟考试（高优先级）
6. 查漏：补充薄弱环节（中优先级）

### 动态调整机制

系统会自动分析任务完成情况并提供调整建议：

**分析维度**：
- 完成率：已完成任务占比
- 逾期情况：是否有任务超期
- 进度趋势：实际vs计划进度
- 今日分配：是否有今日任务

**自动调整**：
1. **逾期任务多**→ 建议减少每日任务量
2. **完成率高**（>80%）→ 可增加每日任务量
3. **今日无任务**→ 自动分配下一个未开始任务

**使用方法**：
- 在已有拆分的任务上再次使用"按页数拆分"
- 系统会检测现有进度并提供分析
- 选择"是否分析并调整计划"

### 最佳实践建议

#### 1. 初次规划
- 先创建3天的任务，不要一次规划太远
- 根据书籍难度合理设置每日页数
- 技术书籍：10-15页/天
- 文学作品：30-50页/天
- 教科书籍：15-25页/天

#### 2. 持续调整
- 每完成2-3个任务后评估进度
- 根据实际情况调整后续计划
- 利用系统的自动分析功能

#### 3. 配合其他功能
- 使用"今日任务"系统管理每日阅读
- 设置优先级区分重要章节
- 添加笔记链接记录读书笔记

#### 4. 常见场景

**场景1：考试复习**
```
1. 创建主任务：【目标】通过算法考试
2. 使用考试模板创建阶段任务
3. 对"练习"阶段按章节拆分刷题任务
4. 每日标记3-5个题目为今日任务
```

**场景2：技术学习**
```
1. 创建主任务：【项目】学习React框架
2. 使用技术模板创建学习路径
3. 对"实践"阶段按功能模块拆分
4. 配合启动链接直接打开IDE
```

**场景3：读书计划**
```
1. 创建主任务：【项目】阅读《人类简史》
2. 按页码渐进式拆分（每天30页）
3. 每3天创建一次新任务
4. 根据实际进度动态调整
```

### 注意事项

1. **避免过度规划**：不要一次创建太多任务
2. **及时更新状态**：完成后立即标记，便于系统分析
3. **合理设置优先级**：重要章节设置高优先级
4. **记录学习笔记**：利用MarginNote的笔记功能
5. **定期回顾调整**：每周回顾并调整计划

## 自定义字段管理 📋

### 字段管理统一入口

MNTask v0.6.13 新增了强大的字段管理功能，让你可以灵活组织任务卡片的信息结构。

#### 主要功能

1. **📝 添加新字段**
   - 自动添加到信息字段的最上方（紧挨着信息字段）
   - 两步操作：输入字段名 → 输入内容
   - 无需选择位置，简化操作流程

2. **✏️ 编辑现有字段**
   - 快速修改已有字段的内容
   - 保持字段格式和样式

3. **📋 管理字段内容**
   - **多选支持**：可以同时选择多个字段或评论
   - **移动功能**：选择精确的目标位置（字段前后或信息字段顶部/底部）
   - **删除功能**：批量删除不需要的内容
   - **平铺显示**：直接显示所有内容，一目了然

#### 使用方法

1. **访问字段管理**
   - 选中任务卡片
   - 长按"任务管理"按钮
   - 在"字段处理"菜单中选择"📋 字段管理"

2. **添加自定义字段的步骤**
   - 第一步：输入字段名称
   - 第二步：输入字段内容（可选）
   - 自动添加到信息字段最上方

3. **管理字段内容的流程**
   - 选择"管理字段内容"
   - 在单一对话框中查看所有内容并多选
   - 选择"移动"或"删除"操作
   - 如果选择移动，可精确选择在某个字段前后的位置

#### 实际应用场景

1. **项目信息整理**
   - 添加"负责人"、"截止日期"等自定义字段
   - 将相关信息移动到对应字段下

2. **学习任务管理**
   - 添加"学习资料"、"练习题目"等字段
   - 灵活组织学习内容

3. **会议记录整理**
   - 添加"决议事项"、"待办事项"等字段
   - 快速归类会议内容

#### 注意事项

1. 字段管理功能仅适用于任务卡片
2. 删除操作不可恢复，请谨慎使用
3. 移动内容时会保持原有格式
4. 支持批量操作，提高效率

## 任务记录系统 📝

从 v0.6.15 开始，MNTask 引入了全新的任务记录系统，让您可以详细跟踪每个任务的执行过程。

### 核心功能

#### 1. 任务记录
- **时间戳记录**：每条记录自动添加时间戳
- **进度追踪**：可选的进度百分比记录
- **工作日志**：记录每个步骤的详细内容
- **历史查看**：完整的任务执行历史

#### 2. 使用方法

##### 添加任务记录
1. 选中任务卡片
2. 长按"进度追踪"按钮
3. 选择"📝 添加任务记录"
4. 输入工作内容和进度

##### 快速记录
使用"⚡ 快速记录"功能，提供常用记录模板：
- ✅ 完成一个步骤
- 🚧 遇到问题
- 💡 发现新思路
- 🔄 切换方案
- ⏸️ 暂停工作
- ▶️ 继续工作
- 🎯 达到里程碑

##### 查看历史记录
1. 选择"📊 查看任务记录"
2. 查看完整的时间线
3. 支持导出记录到剪贴板

### 记录格式

```
📝 任务记录
├── 2025-01-08 10:30 | 开始设计数据结构 | 进度: 10%
├── 2025-01-08 14:20 | 完成基础框架搭建 | 进度: 35%
├── 2025-01-08 16:00 | 遇到问题：性能优化需要重新设计 | 进度: 40%
└── 2025-01-08 18:30 | 问题解决，功能测试通过 | 进度: 75%
```

### 进度管理
- **自动更新**：记录时可同步更新任务总进度
- **进度字段**：在任务卡片显示当前进度
- **智能提示**：根据进度提供任务完成建议

### 应用场景

#### 1. 软件开发
```
10:00 | 分析需求文档 | 10%
11:30 | 设计系统架构 | 25%
14:00 | 编写核心模块 | 50%
16:30 | 调试并修复bug | 70%
18:00 | 完成单元测试 | 90%
```

#### 2. 学习任务
```
09:00 | 开始阅读第3章 | 30%
10:30 | 完成章节笔记 | 40%
14:00 | 做课后练习题 | 55%
16:00 | 复习重点内容 | 70%
```

#### 3. 项目管理
```
周一 | 项目启动会议 | 5%
周二 | 完成需求分析 | 20%
周三 | 设计方案评审 | 35%
周四 | 开始实施阶段 | 50%
```

### 最佳实践

1. **及时记录**：完成重要步骤后立即记录
2. **详细描述**：记录关键决策和遇到的问题
3. **定期回顾**：通过历史记录优化工作流程
4. **进度同步**：保持记录进度与实际进度一致

### 注意事项

- 任务记录会作为评论保存在任务卡片中
- 记录内容支持 Markdown 格式
- 导出功能方便生成工作报告
- 建议为重要任务保持详细记录

## 快捷操作

### 工具栏按钮（v0.6.16 精简版）
1. **任务制卡**：
   - 单击：智能任务制卡（根据父卡片自动推断类型）
   - 长按：任务管理菜单（制卡、修改类型、批量制卡、更新子卡片）
   
2. **状态切换**：
   - 单击：推进任务状态（向前）
   - 长按：进度管理菜单（推进状态、退回状态）
   
3. **今日任务**：
   - 单击：标记/取消今日任务
   - 长按：今日任务菜单（优先级设置、聚焦看板、刷新看板、处理过期任务）
   
4. **筛选排序**：
   - 单击：打开任务筛选器
   - 长按：筛选菜单（排序、批量操作、预设筛选）
   
5. **看板视图**：
   - 单击：聚焦今日看板
   - 长按：看板菜单（任务脑图、统计、数据导出）
   
6. **字段管理**：
   - 单击：快速添加字段
   - 长按：字段菜单（字段管理、任务记录、启动链接）
   
7. **快速启动**：
   - 单击：自动启动第一个进行中任务
   - 长按：启动菜单（选择任务启动、更新启动链接、调整任务顺序）

### 键盘快捷键
（需要在 MarginNote 中设置）
- 快速创建任务
- 切换任务状态
- 标记今日任务

## 使用技巧

### 1. 任务规划流程
```
创建目标 → 分解为关键结果 → 创建项目 → 拆分为动作
```

### 2. 日常使用流程
```
早上：筛选本周任务 → 标记今日任务 → 设置优先级
工作中：更新任务状态 → 记录进展
晚上：回顾今日完成 → 归档已完成 → 规划明日
```

### 3. 周期性整理
- **每日**：更新今日看板，归档完成任务
- **每周**：分析任务报告，调整优先级
- **每月**：回顾目标进展，调整关键结果

### 4. 最佳实践
1. **任务粒度**：动作应该是 1-4 小时可完成的
2. **及时更新**：状态变化及时更新
3. **定期清理**：已完成的任务及时归档
4. **合理分类**：充分利用标签系统
5. **依赖管理**：明确标注任务间的依赖关系

### 5. 注意事项
- 任务标题不要过长，详细信息放在评论中
- 重要任务设置截止日期
- 利用颜色区分不同类型的任务
- 定期使用任务分析功能，及时调整计划

## 常用工作流

MNTask 支持多种工作流程，以下是经过实践验证的高效工作流程，帮助你更好地管理任务。

### GTD (Getting Things Done) 工作流

GTD 是一种经典的任务管理方法，MNTask 完美支持这一流程：

#### 1. 收集阶段
```
步骤：
1. 快速创建任务卡片（不必立即分类）
2. 使用"动作"类型暂存所有想法
3. 放入 Inbox 看板集中管理
```

#### 2. 整理阶段
```
步骤：
1. 打开 Inbox 看板
2. 逐个审视任务：
   - 2分钟内能完成？立即执行
   - 不可执行？删除或归档为参考资料
   - 可执行？继续下一步
```

#### 3. 组织阶段
```
步骤：
1. 将任务转换为合适的类型：
   - 大目标 → 转为"目标"类型
   - 具体项目 → 转为"项目"类型
   - 可执行任务 → 保持"动作"类型
2. 设置优先级（高/中/低）
3. 添加时间标签（今日/本周/某天）
4. 建立任务间的链接关系
```

#### 4. 执行阶段
```
步骤：
1. 使用"快速启动"按钮开始今日第一个任务
2. 利用浮窗显示任务详情，保持专注
3. 完成后更新状态，记录进展
4. 继续下一个任务
```

#### 5. 回顾阶段
```
每日回顾：
- 查看今日完成情况
- 处理过期任务
- 规划明日任务

每周回顾：
- 分析任务统计报告
- 调整项目优先级
- 清理已完成任务
- 更新长期目标进展
```

### OKR 季度规划工作流

适用于团队或个人的季度目标管理：

#### 1. 设定目标 (Objectives)
```
操作步骤：
1. 创建顶层卡片，类型选择"目标"
2. 标题格式：【目标｜未开始】提升产品用户体验
3. 添加详细描述和背景信息
4. 设置季度时间范围
```

#### 2. 制定关键结果 (Key Results)
```
操作步骤：
1. 在目标卡片下创建子卡片
2. 类型选择"关键结果"
3. 确保结果可量化：
   - ✅ 用户满意度达到90%
   - ✅ 页面加载时间降低到2秒内
   - ❌ 提升用户体验（不可量化）
4. 每个目标建议3-5个关键结果
```

#### 3. 分解项目
```
操作步骤：
1. 为每个关键结果创建项目
2. 项目应该有明确的交付物
3. 示例：
   - 关键结果：用户满意度90%
   - 项目1：重构用户界面
   - 项目2：优化客服流程
   - 项目3：建立用户反馈机制
```

#### 4. 创建可执行动作
```
操作步骤：
1. 将项目分解为具体动作
2. 每个动作1-4小时可完成
3. 添加启动链接（应用/文档）
4. 分配到具体的日期
```

#### 5. 跟踪执行
```
日常执行：
- 每日查看OKR相关的今日任务
- 使用任务记录功能记录关键进展
- 及时更新关键结果的完成百分比

周度检查：
- 评估关键结果进展
- 调整项目优先级
- 识别风险和障碍

月度评审：
- 全面评估OKR进展
- 必要时调整关键结果
- 庆祝达成的里程碑
```

### 读书学习工作流

专为知识获取和技能学习设计的渐进式工作流：

#### 1. 学习项目创建
```
步骤：
1. 创建主任务：
   - 【项目｜未开始】阅读《深度学习》
   - 【项目｜未开始】掌握 React 框架
2. 添加学习目标和预期成果
3. 估算总体时间投入
```

#### 2. 渐进式任务拆分
```
选择合适的拆分策略：

A. 按页数拆分（适合阅读）：
   - 输入总页数：500页
   - 设置每日页数：20页
   - 只创建3天的任务（避免计划僵化）
   - 第一个任务自动标记为今日

B. 按章节拆分（适合教材）：
   - 根据目录创建章节任务
   - 重点章节设置高优先级
   - 配合笔记链接记录要点

C. 使用学习模板（适合技能学习）：
   - 预习 → 精读 → 练习 → 总结 → 应用
   - 每个阶段都有明确目标
   - 技术学习增加"环境搭建"步骤
```

#### 3. 执行与记录
```
每日执行：
1. 通过快速启动开始学习任务
2. 使用 MarginNote 做笔记和标注
3. 在任务卡片中记录：
   - 学习时长
   - 关键收获
   - 疑问点
   - 相关笔记链接

进度追踪：
- 使用任务记录功能记录每次学习
- 更新完成页数或章节
- 标记重要知识点
```

#### 4. 动态调整
```
每3天评估一次：
1. 检查实际进度 vs 计划进度
2. 根据难度调整每日任务量：
   - 内容简单 → 增加每日页数
   - 内容困难 → 减少每日页数
3. 创建接下来3天的任务
4. 保持灵活性，避免过度规划
```

#### 5. 知识巩固
```
阶段性复习：
1. 每完成一个章节/模块：
   - 创建总结任务
   - 整理核心概念
   - 制作思维导图
2. 实践应用：
   - 编程书籍：完成示例代码
   - 理论书籍：写读书笔记
   - 技能学习：做实际项目
```

### 项目管理工作流

适用于复杂项目的端到端管理：

#### 1. 项目启动
```
创建项目结构：
1. 顶层：项目目标
   【目标｜未开始】完成产品 2.0 版本发布
2. 第二层：项目阶段（作为关键结果）
   【关键结果｜未开始】需求分析完成
   【关键结果｜未开始】设计方案通过
   【关键结果｜未开始】开发测试完成
   【关键结果｜未开始】成功上线发布
```

#### 2. 任务分解
```
使用 WBS（工作分解结构）：
1. 每个阶段分解为具体项目
2. 项目继续分解为可执行动作
3. 确保每个动作都有：
   - 明确的完成标准
   - 预估时间
   - 负责人（在备注中）
   - 前置依赖
```

#### 3. 进度管理
```
日常管理：
1. 团队成员更新各自任务状态
2. 使用任务记录功能记录：
   - 完成的工作
   - 遇到的问题
   - 需要的支持
3. 项目经理查看整体进展

里程碑检查：
1. 筛选本周到期的任务
2. 识别延期风险
3. 调整资源分配
4. 更新项目时间线
```

#### 4. 风险管理
```
风险识别：
1. 使用标签标记风险任务
2. 高风险任务设置高优先级
3. 创建应急计划任务（但不激活）

问题处理：
1. 遇到阻塞立即记录
2. 创建解决方案任务
3. 调整后续任务计划
```

### 每日工作流程

高效的一天从良好的任务管理开始：

#### 早晨例程（建议 9:00）
```
1. 打开 MNTask，刷新今日看板
2. 处理过期任务提醒：
   - 重要的：更新为今天
   - 已过时：移除标记
   - 需跟进：标记为过期
3. 从任务池中选择今日任务：
   - 优先选择"进行中"的任务
   - 平衡紧急和重要
   - 考虑精力分配
4. 设置任务优先级和计划时间
5. 使用"快速启动"开始第一个任务
```

#### 工作时段
```
专注执行：
1. 单击"快速启动"进入任务
2. 任务详情在浮窗中显示
3. 专注完成当前任务
4. 记录关键进展和问题

任务切换：
1. 更新刚完成任务的状态
2. 添加简短的完成记录
3. 使用"选择并启动"切换到下一个任务

临时任务：
1. 快速创建任务卡片
2. 评估优先级
3. 决定是否今日处理
```

#### 下午检查（建议 14:00）
```
1. 查看上午完成情况
2. 调整下午任务安排
3. 处理新增的紧急任务
4. 更新任务进度百分比
```

#### 晚间回顾（建议 18:00）
```
1. 更新所有任务状态
2. 记录今日主要成果
3. 将未完成任务：
   - 继续标记为明日任务
   - 或推迟到合适日期
4. 快速规划明日重点
5. 归档已完成的任务

周五额外步骤：
1. 生成本周任务报告
2. 分析任务完成率
3. 规划下周重点
4. 清理和归档任务
```

### 工作流最佳实践

#### 1. 任务粒度控制
- **目标**：季度或年度级别
- **关键结果**：月度可检查
- **项目**：1-4 周完成
- **动作**：1-4 小时完成

#### 2. 优先级原则
- **高优先级**：紧急且重要，影响关键结果
- **中优先级**：重要但不紧急，常规推进
- **低优先级**：nice to have，有空再做

#### 3. 状态流转规则
- **未开始 → 进行中**：实际开始工作时
- **进行中 → 已完成**：达到完成标准时
- **已完成 → 已归档**：经过回顾确认后

#### 4. 标签使用建议
- 项目标签：如 #产品2.0、#Q1目标
- 类型标签：如 #紧急、#阻塞、#等待他人
- 场景标签：如 #办公室、#出差、#家里

#### 5. 定期维护
- **每日**：更新状态，处理过期任务
- **每周**：回顾进展，调整计划
- **每月**：分析数据，优化流程
- **每季**：评估 OKR，设定新目标

## 更新日志

### v0.8.22 (2025-01-11)
- **紧急修复**：修复全笔记本搜索时的 API 错误
  - 修复 `MNNotebook.getCurrent()` 方法不存在的问题
  - 改用正确的 API：`MNUtil.currentNotebook` 和 `MNUtil.notesInStudySet()`
  - 优化搜索逻辑，使用扁平化的笔记数组进行遍历
  - 添加错误处理，防止搜索失败影响功能

### v0.8.21 (2025-01-11)
- **修复**：解决今日任务无法显示的问题
  - 新增从整个笔记本搜索今日任务的功能（不限于看板）
  - 优化任务筛选逻辑：先从看板筛选，如果没有结果再从整个笔记本搜索
  - 添加详细的调试日志，帮助定位问题
  - 支持未绑定到看板的独立任务卡片

### v0.8.20 (2025-01-11)
- **优化**：改进核心文件加载机制
  - 为 xdyy_utils_extensions.js 添加错误捕获和日志
  - 添加详细的加载状态日志，便于调试
  - 确保加载失败时能够正确报告错误
  - 提高插件稳定性和可靠性

### v0.8.19 (2025-01-11)
- **紧急修复**：修复 "Can't find variable: MNTaskManager" 致命错误
  - 修复 xdyy_utils_extensions.js 中的语法错误（缺失的花括号）
  - 改进错误处理机制，避免静默失败
  - 确保 MNTaskManager 类能够正确加载

### v0.8.18 (2025-01-11)
- **修复**：修复今日任务无法正确识别的问题
  - 修复 isToday 方法无法识别 HTML 格式今日标签的问题
  - 现在可以正确识别通过标记功能添加的今日任务
  - 同步修复 getTodayMarkDate 方法的 HTML 解析逻辑

### v0.8.17 (2025-01-11)
- **新功能**：添加重置所有配置功能
  - 在高级设置中添加"⚠️ 重置所有配置"按钮（红色警告按钮）
  - 可完全清除所有 MNTask 配置（包括本地和 iCloud）
  - 解决因配置损坏导致的"Note not exist!"持续错误
  - 双重确认机制，防止误操作
  - 重置后自动关闭设置面板并刷新视图
  - ⚠️ 注意：此操作不可恢复，所有看板绑定将被清除

### v0.8.16 (2025-01-11)
- **新功能**：添加空配置清理功能
  - 在高级设置中添加"清理空配置"按钮
  - 自动检测并清理未使用的笔记本配置
  - 释放 iCloud 存储空间，提高同步效率
  - 提供清理结果反馈，显示清理数量

### v0.8.15 (2025-01-11)
- **修复**：解决多笔记本切换时"Note not exist!"错误
  - 修复 getCurrentNotebookId 方法中的属性名称不一致问题
  - 在 notebookWillOpen 时加载笔记本特定配置，确保每个笔记本的任务看板独立工作
- **优化**：智能管理笔记本配置存储
  - 只有在设置了看板绑定时才创建笔记本配置
  - 避免为未使用任务管理功能的笔记本创建不必要的配置
  - 减少 iCloud 存储使用，提高同步效率

### v0.8.7 (2025-01-10)
- **修复**：解决 todayTasks 变量作用域错误
  - 移除 catch 块中对可能未定义变量的引用
  - 简化错误日志记录逻辑

### v0.8.6 (2025-01-10)
- **修复**：解决今日看板"加载任务数据失败"的问题
  - 重构 WebView 创建和数据加载逻辑，参考 MNUtils 的实现模式
  - 添加 webViewDidFinishLoad 委托方法，确保数据在 HTML 加载完成后再传递
  - 统一使用 todayBoardWebViewInstance 作为实际的 WebView 引用

### v0.8.5 (2025-01-10)
- **架构改进**：将今日看板集成到 settingController 中
  - 解决独立窗口无法移动和关闭的问题
  - 今日看板现在作为设置面板的一个标签页，提供更好的用户体验
  - 移除独立的 todayBoardController 加载

### v0.7.7 (2025-01)
- **根本性修复**：解决 HTML 今日看板导致的 WebView delegate 错误
  - 移除 todayBoardController.js 中的 `JSB.require('utils')` 避免重复加载
  - 恢复启动时加载控制器，确保类定义在正确的上下文中
  - 简化动态加载逻辑，避免复杂的状态管理

### v0.7.6 (2025-01)
- **关键修复**：解决 TodayBoardController 类未定义的问题
  - 移除立即执行函数（IIFE）包装，与其他控制器保持一致
  - 采用简单直接的定义方式，让 JSB.defineClass 正常工作
  - 遵循成熟项目（settingController、webviewController）的模式

### v0.7.5 (2025-01)
- **重大修复**：彻底解决 HTML 今日看板导致软件卡死的问题
  - 采用按需加载模式，避免启动时重复定义类
  - 添加防重复加载保护机制
  - 改进 UIWebView 资源管理和清理
  - 增强调试日志，便于问题追踪
- **架构改进**：
  - 将 todayBoardController 从启动加载改为动态加载
  - 使用全局标记防止重复 JSB.require
  - 添加类定义前的存在性检查

### v0.7.4 (2025-01)
- **修复**：HTML 今日看板导致软件崩溃的严重问题
  - 修复了错误的 JSB.require('MNTaskManager') 依赖
  - 修复了未定义的 taskFrame 变量
  - 改进了 self 引用模式，遵循成熟项目的最佳实践
- **改进**：增强了错误处理和用户提示
  - 添加了更详细的错误日志
  - 提供了更友好的错误提示信息
  - 防止了控制器加载失败导致的崩溃

### v0.7.3 (2025-01)
- **新增**：HTML 增强版今日看板
  - 全新的卡片化任务显示界面，视觉体验更佳
  - 任务分组显示：过期任务、高/中/低优先级、未开始
  - 实时统计信息：任务总数、进行中、已完成、完成率
  - 快速操作按钮：更新状态、启动任务、查看详情
  - 支持任务进度条显示
  - 响应式设计，适配不同屏幕尺寸
- **技术改进**：
  - 新增 `todayboard.html` 提供现代化的任务看板界面
  - 新增 `todayBoardController.js` 管理 WebView 和数据交互
  - 增强 MNTaskManager 类，添加更多数据处理方法
  - 支持任务数据 JSON 导出和报告生成
- **使用方法**：
  - 长按"看板视图"按钮，选择"🌐 HTML 今日看板"
  - 或在看板菜单中选择该选项
  - 保留原有文本看板作为备选方案

### v0.7.2 (2025-01)
- **修复**：解决 getAllTaskCardsFromBoard 等方法未定义导致的错误
- **修复**：切换任务类型时正确处理字段（动作类型不需要"包含"和状态字段）
- **修复**：移除任务状态中的"已阻塞"和"已取消"选项，保持状态简洁
- **修复**：今日看板刷新功能失效问题，现在可以正常显示今日任务

### v0.7.1 (2025-01)
- **完善未实现功能**：
  - **归档卡片功能**：支持批量归档已完成的任务到归档区，自动更新状态为"已归档"，记录归档时间
  - **更新卡片功能**：提供多种更新选项（更新路径、链接关系、清理失效链接、刷新字段），支持批量操作
  - **获取今日OKR任务**：筛选今日标记的OKR任务，生成详细执行报告，支持多种查看方式（剪贴板/卡片/浮窗）
  
- **文档改进**：
  - 新增"常用工作流"章节，包含5种经过验证的高效工作流程：
    - GTD工作流：收集→整理→组织→执行→回顾
    - OKR季度规划：目标设定→关键结果→项目分解→执行跟踪
    - 读书学习工作流：渐进式拆分→动态调整→知识巩固
    - 项目管理工作流：WBS分解→进度管理→风险控制
    - 每日工作流程：早晨例程→专注执行→晚间回顾
  - 添加工作流最佳实践指导，提升用户体验

### v0.7.0 (2025-01)
- **新增快速启动功能**：
  - 新增第7个工具栏按钮"快速启动"，帮助用户快速开始进行中的任务
  - 单击自动启动今日看板中第一个进行中的任务
  - 支持智能识别启动链接类型（卡片链接、UI状态链接、外部URL）
  - 长按显示更多选项：选择任务启动、更新启动链接、调整任务顺序

- **启动链接智能处理**：
  - 卡片链接：直接定位到目标卡片
  - UI状态链接：在浮窗中显示任务内容
  - 外部URL：打开对应的应用或网页
  
- **任务排序功能**：
  - 支持手动调整今日看板中进行中任务的顺序
  - 通过交互式界面上下移动任务或移到顶部/底部
  - 排序信息保存在"排序"字段中，优先于智能排序
  
- **剪贴板链接识别**：
  - 更新启动链接时自动识别剪贴板内容
  - 支持卡片ID（32位字符串）自动转换为URL
  - 支持识别 MarginNote URL 和外部网址
  - 智能提取域名作为链接文本

- **技术改进**：
  - 新增 `MNTaskManager.getLinkType()` 方法判断链接类型
  - 新增 `MNTaskManager.addLaunchField()` 方法添加启动字段
  - 增强了 `sortTodayTasks()` 方法，支持手动排序优先
  - 改进了 `addOrUpdateLaunchLink()` 方法，支持更多应用

### v0.6.26 (2025-01)
- **代码质量改进**：
  - 为核心功能添加了 try-catch 错误处理（taskCardMake、toggleTaskStatusForward、toggleTodayMark）
  - 增强了错误日志记录，便于调试和问题定位
  - 提升了插件稳定性，避免单个功能错误导致插件崩溃
- **技术优化**：
  - 统一了错误提示格式，提供更友好的用户反馈
  - 添加了详细的错误日志输出，方便开发者调试
  - 确保关键操作在出错时能够优雅降级

### v0.6.23 (2025-01)
- **修复问题**：
  - 修复今日看板中过期任务提醒重复显示的问题
- **技术细节**：
  - 在 `clearTaskLinksFromBoard` 函数中添加了清理过期任务提醒的逻辑
  - 现在刷新今日看板时会先清理旧的过期任务提醒，再添加新的
  - 避免了多次刷新导致的重复显示问题

### v0.6.22 (2025-01)
- **修复问题**：
  - 修复设置任务优先级功能没有弹出选择对话框的问题
  - 修复优先级字段显示 "undefined" 的错误
  - 修复字段管理菜单中任务记录功能不显示的问题
- **改进**：
  - 增强了 setTaskPriority 功能的错误处理和参数验证
  - 添加了详细的调试日志，帮助定位问题
  - 在 MNTaskManager.setTaskPriority 中增加了参数验证，防止无效值被写入
  - 修正菜单分隔符的实现方式，使用纯字符串代替对象形式
- **技术细节**：
  - 加强了对 MNUtil.userSelect 返回值的验证
  - 确保只有有效的优先级值（高/中/低）才能被设置
  - 菜单分隔符从 `{action: "separator", menuTitle: "──────────"}` 改为纯字符串 `"──────────"`

### v0.6.21 (2025-01)
- **菜单重组**：
  - 将任务记录功能从"状态切换"按钮移到"字段管理"按钮
  - 状态切换按钮现在更精简，只保留状态推进和退回功能
  - 字段管理按钮功能增强，包含字段管理和任务记录两大类功能
- **优化理由**：
  - 任务记录本质上是管理任务卡片的字段内容，放在字段管理中更合理
  - 状态切换按钮符合单一职责原则，专注于状态变更
  - 功能分组更清晰，提升用户体验
- **字段管理菜单新布局**：
  - 字段操作：添加字段、编辑字段、字段管理
  - 任务记录：添加记录、查看记录、更新进度
  - 其他功能：启动链接管理

### v0.6.20 (2025-01)
- **功能改进**：
  - **过期任务功能增强**：
    - 在今日任务菜单中添加「处理过期任务」选项，更容易找到
    - 今日看板现在直接显示过期任务列表，而不仅仅是数量
    - 过期任务显示具体标题和过期天数，一目了然
  - **筛选功能统一化**：
    - 所有筛选功能现在统一使用 TaskFilterEngine，从看板筛选而非整个笔记本
    - 统一使用 showFilterResultsMenu 展示筛选结果，提供一致的用户体验
    - 修复了旧筛选方法包含非任务笔记的问题
- **代码改进**：
  - 全面统一项目中所有评论添加使用 appendMarkdownComment 而非 appendTextComment
  - 改进了任务记录、推迟记录、场景设置等功能的评论格式
  - 提升了评论内容的可读性和一致性
  - 统一了 utils.js 和 webviewController.js 中的评论添加方式
- **受影响功能**：
  - 创建今日聚焦/Inbox 时的说明评论
  - 任务推迟记录的格式
  - 动作任务场景设置的评论
  - 通用文本替换功能中的评论添加
  - WebView 控制器中的评论操作

### v0.6.19 (2025-01)
- **修复问题**：
  - 修复 MNUtil.input API 使用错误导致的 "can't find NS..." 报错
  - 修复 MNUtil.copyText 不存在的问题，改为使用 MNUtil.copy
  - 修正所有任务记录相关输入框的 API 调用方式
  - 修正任务拆分、批量操作、时间设置等功能中的 MNUtil.input 调用错误
- **API 修正**：
  - MNUtil.input 第三个参数必须是按钮数组，如 ["取消", "确定"]
  - 返回值是对象 {input: text, button: index}，需要正确处理
  - 修复了整个项目中所有错误的 MNUtil.input 使用（共计10+处）

### v0.6.18 (2025-01)
- **修复问题**：
  - 修复任务记录功能无法正常工作的问题
  - 修复任务记录字段匹配失败导致记录无法添加的问题
  - 改进任务记录相关功能的错误处理和日志记录
- **代码优化**：
  - 统一任务记录字段名称，确保字段查找和移动操作的一致性
  - 增强了 addTaskLog、viewTaskLogs、updateTaskProgress 等功能的稳定性

### v0.6.17 (2025-01)
- **代码优化**：
  - 移除对 MNMath 扩展类的依赖
  - 将 `toNoExcerptVersion` 功能整合到 taskUtils 中，提高代码独立性和可维护性

### v0.6.16 (2025-01)
- **界面精简**：工具栏按钮从 10 个精简到 6 个核心功能
- **菜单优化**：
  - 移除未实现功能，保留已开发的核心功能
  - 支持单击和长按操作，提升使用效率
  - 菜单内容更聚焦，查找功能更快速
- **新增字段管理按钮**：统一字段操作入口
- **改进用户体验**：
  - 按钮功能更明确（任务制卡、状态切换、今日任务、筛选排序、看板视图、字段管理）
  - 单击执行常用操作，长按显示更多选项
- **删除功能**：
  - 移除项目看板、动作看板、高级筛选等未完成功能
  - 保留使用 MNTaskManager 和 TaskFieldUtils 的核心功能

### v0.6.15 (2025-01)
- **新增**：任务记录系统
  - 时间戳自动记录每个工作步骤
  - 支持进度百分比追踪
  - 快速记录模板（问题、思路、里程碑等）
  - 历史记录查看和导出
- **新增**：任务进度管理
  - 自动更新总体进度
  - 进度字段显示
  - 基于记录的进度计算
- **优化**：菜单系统增加任务记录入口

### v0.6.14 (2025-01)
- **新增**：今日任务过期处理系统
  - 自动检测过期的今日任务
  - 提供多种处理方式（保持/标记过期/更新日期/移除）
  - 支持批量处理或逐个处理
- **优化**：今日字段自动记录标记日期
- **新增**：过期任务专用字段显示
- **优化**：刷新今日看板时自动提示处理过期任务

### v0.6.25 (2025-01)
- **修复**：过期任务点击"今日"按钮时的双重标记问题
  - 现在添加今日标记时会自动移除过期标记
  - 避免任务同时显示"过期X天"和"今日"两个标记

### v0.8.0 (2025-07)
- **关键修复**：修正 JSB 框架 self 引用错误
  - 恢复正确的 `const getTodayBoardController = () => self` 模式
  - 在所有方法内部使用 `let self = getTodayBoardController()` 
  - 遵循 CLAUDE.md 中的 JSB 框架规范要求
  - 解决 TodayBoardController 无法正确获取实例的问题

### v0.7.8 (2025-07)
- **修复**：HTML 今日看板崩溃问题
  - 将 TodayBoardController 移至 main.js，解决文件加载顺序问题
  - 修复 WebView delegate 方法参数错误
  - 参考 mnutils 实现模式，确保类在正确上下文中定义

### v0.7.7 (2025-07)
- **新增**：HTML 增强版今日看板
  - 现代化卡片式 UI 设计
  - 支持任务分组展示（未开始、进行中、已完成）
  - 实时统计信息显示
  - 快速操作按钮（状态切换、启动任务、查看详情）
  - 支持导出今日任务报告

### v0.6.24 (2025-01)
- **优化**：简化过期任务显示方式
  - 过期任务现在与其他任务统一使用行内链接格式
  - 移除冗余的过期任务提醒文字
  - 过期任务显示为：`🎯⚠️ [任务内容 (过期X天)](链接)`
  - 过期任务作为独立分组，优先显示在看板顶部

### v0.6.23 (2025-01)
- **修复**：清理今日看板时正确删除过期任务提醒内容
- **修复**：避免过期任务提醒重复累积

### v0.6.22 (2025-01)
- **修复**：设置任务优先级功能弹窗显示问题
- **改进**：增加优先级设置的错误处理和调试信息

### v0.6.21 (2025-01)
- **改进**：将任务记录功能移至字段管理按钮中
- **优化**：重新组织菜单结构，提升操作逻辑性

### v0.6.13 (2025-01)
- **新增**：字段管理统一入口（manageCustomFields）
- **简化**：自定义字段自动添加到信息字段顶部，无需选择位置
- **新增**：字段内容多选管理功能
- **新增**：支持批量移动和删除字段内容
- **优化**：字段内容平铺显示，操作更直观
- **优化**：移动位置选择更精确（字段前后）

### v0.6.12 (2025-01)
- **今日看板优化**：
  - 改为链接引用模式，不再移动任务本身
  - 添加任务类型图标显示（🎯📊📁▶️）
  - 修复重复内容问题
- **读书任务管理系统**：
  - 支持按章节拆分（含多层级）
  - 按页码渐进式拆分（不一次拆完）
  - 动态调整机制（根据进度自动优化）
  - 三种学习模板（标准/技术/考试）
- **智能制卡优化**：
  - 自动推断任务类型（目标→关键结果→项目）
  - 减少不必要的类型选择对话框

### v0.8.5 (2025-01-10)
- **重构 HTML 今日看板架构**：
  - 将今日看板集成到 settingController 中
  - 作为新的视图选项"今日看板"，与 Task Board 并列
  - 利用现有的移动和关闭功能，提供统一的界面体验
  - 解决了独立控制器无法移动和关闭的问题
  - 支持与其他设置视图的无缝切换

### v0.8.4 (2025-01-10)
- **修复 HTML 看板数据加载失败问题**：
  - 移除 show() 方法中的重复 loadTaskData 调用
  - 改进 WebView 加载机制，在 webViewDidFinishLoad 中加载数据
  - 增强错误处理，输出详细错误信息
  - 添加 WebView 状态检查，确保数据加载时机正确
  - 修复 loadFileURLAllowingReadAccessToURL 参数（移除末尾斜杠）

### v0.9.4 (2025-01-11)
- **修复今日看板自动刷新**：
  - 修正状态同步逻辑，使用完整的看板刷新而非简单刷新
  - 确保任务在状态改变时正确移动到对应分组（进行中/未开始/已完成）
  - 使用延迟执行避免状态更新冲突

### v0.9.3 (2025-01-11)
- **优化今日看板功能**：
  - 移除统计信息功能，避免重复添加问题
  - 新增今日任务状态自动同步：当任务状态更新时，今日看板自动刷新
  - 提升今日看板的实时性和准确性

### v0.9.2 (2025-01-11)
- **修复今日看板刷新问题**：
  - 修复 `getHTMLCommentFieldText` 函数不存在导致的崩溃
  - 简化 `sortTodayTasks` 方法，移除手动排序功能
  - 恢复今日看板内容显示功能
  - 提升看板刷新的稳定性

### v0.8.3 (2025-01-10)
- **修复 HTML 看板透明层阻挡问题**：
  - 改变显示方式：从模态呈现改为添加到 studyView
  - 修复视图配置：添加白色背景避免透明
  - 实现 show()/hide() 方法，参考成熟插件模式
  - 更新 close 方法，使用 hide() 替代模态关闭
  - 解决鼠标点击无效和插件栏消失问题

### v0.8.2 (2025-01-10)
- **HTML 今日看板完善**：
  - 基于对多个成熟插件的深入分析，全面重构 todayBoardController.js
  - 添加标准的 createButton 方法，与成熟插件保持一致
  - 简化主路径获取逻辑，使用统一的 taskUtils.mainPath
  - 修复 WebView 创建和加载方式，使用标准模式
  - 优化导航栏按钮创建，保持界面简洁
  - 提升代码质量和稳定性

### v0.8.1 (2025-01-10)
- **HTML 今日看板架构重构**：
  - 将 TodayBoardController 独立为单独文件
  - 修复 JSB 框架 self 引用问题
  - 实现正确的 WebView 委托方法

### v0.8.0 (2025-01-10)
- **新增 HTML 今日看板**：
  - 全新的可视化任务管理界面
  - 支持任务卡片展示和快速操作
  - 集成任务状态更新和启动功能

### v0.0.0 (初始版本)
- 基础任务管理功能
- OKR 层级系统（目标、关键结果、项目、动作）
- 任务状态管理（未开始、进行中、已完成、已归档）
- 今日任务系统
- 智能筛选引擎
- 批量操作功能
- 任务分析与建议
- 看板管理

---

💡 **提示**：MNTask 会持续更新，建议关注项目更新以获取最新功能。


## TODO

### 拆分任务功能

#### 根据目录拆分

1. 手动复制目录信息的 OCR 内容？
2. 让 AI 根据目录信息固定内容样式
3. 然后让插件来拆分

（后续）能否从 API 获取到目录信息？