<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JSON Editor with Highlighting</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/github.min.css" rel="stylesheet">
    <style>
        body{
          margin: 0;
            background-color: lightgray;
        }
        pre{
          margin: 0;
          padding: 0;
        }
        code{
            background-color: lightgray !important;
            height: calc(100vh - 25px);
            white-space: pre-wrap; /* 保留空格和换行符，并自动换行 */
            word-wrap: break-word; /* 针对长单词进行换行 */
        }
        .editor {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            font-family: monospace;
            white-space: pre-wrap;
            overflow: auto;
            outline: none; /* Removes the default focus outline */
        }
        .key {
            color: red;
        }
        .string {
            color: green;
        }
        .number {
            color: blue;
        }
        .boolean {
            color: magenta;
        }
        .null {
            color: gray;
        }

    </style>
</head>
<body>
<pre><code class="javascript" id="code-block" contenteditable>let note = MNNote.getFocusNote()
MNUtil.showHUD(note.noteTitle)</code></pre>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/languages/javascript.min.js"></script>
<script>
// hljs.registerLanguage('javascript', function(hljs) {
//   var KEYWORDS = 'in if for while finally var new function do return void else break catch ' +
//                  'instanceof with throw case default try this switch continue typeof delete ' +
//                  'let yield const export super debugger as await static import from as async await';
//   var LITERALS = 'true false null undefined NaN Infinity';
//   var TYPES = 'Object Function Boolean Symbol MNUtil';

//   return {
//     keywords: {
//       keyword: KEYWORDS,
//       literal: LITERALS,
//       built_in: TYPES
//     },
//     contains: [
//       hljs.APOS_STRING_MODE,
//       hljs.QUOTE_STRING_MODE,
//       hljs.C_LINE_COMMENT_MODE,
//       hljs.C_BLOCK_COMMENT_MODE,
//       hljs.C_NUMBER_MODE,
//       {
//         className: 'property',
//         begin: '\\.\\w+'
//       }
//     ]
//   };
// });
    function updateContent() {
        const editor = document.getElementById('code-block');
        hljs.highlightElement(editor);
        // editor.innerHTML = editor.innerHTML
                          // .replace(/MNUtil\\b/g, '<span class="hljs-built_in">MNUtil</span>')
                          // .replace(/MNNote\\b/g, '<span class="hljs-built_in">MNNote</span>')
                          // .replace(/toolbarConfig\\b/g, '<span class="hljs-built_in">toolbarConfig</span>')
                          // .replace(/toolbarUtil\\b/g, '<span class="hljs-built_in">toolbarUtil</span>');
        editor.blur();
    }
    
    updateContent();
</script>

</body>
</html>