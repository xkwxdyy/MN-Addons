<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»åŠ¡ç®¡ç†çœ‹æ¿ - ç°ä»£åŒ–è®¾è®¡</title>
    
    <style>
        /* ========================================
           ğŸ¨ å…¨å±€æ ·å¼å˜é‡å®šä¹‰
           å®šä¹‰æ•´ä¸ªåº”ç”¨çš„é¢œè‰²ä¸»é¢˜ã€é—´è·ã€åŠ¨ç”»æ—¶é•¿ç­‰
           ======================================== */
        :root {
            /* ä¸»é¢˜è‰² - ç´«è“æ¸å˜è‰²ç³» */
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            
            /* åŸºç¡€é¢œè‰² */
            --bg-primary: #0f0f1e;
            --bg-secondary: #1a1a2e;
            --bg-card: rgba(255, 255, 255, 0.05);
            --bg-glass: rgba(255, 255, 255, 0.1);
            
            /* æ–‡å­—é¢œè‰² */
            --text-primary: #ffffff;
            --text-secondary: #b8bcc8;
            --text-muted: #6c7293;
            
            /* çŠ¶æ€é¢œè‰² */
            --status-todo: #6366f1;
            --status-doing: #f59e0b;
            --status-done: #10b981;
            
            /* ä¼˜å…ˆçº§é¢œè‰² */
            --priority-high: #ef4444;
            --priority-medium: #f59e0b;
            --priority-low: #10b981;
            
            /* å…¶ä»–æ ·å¼å˜é‡ */
            --border-radius: 16px;
            --border-radius-sm: 8px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.2);
            
            /* ç»ç’ƒæ•ˆæœ */
            --glass-blur: blur(10px);
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ========================================
           ğŸ“ åŸºç¡€é‡ç½®å’Œå…¨å±€æ ·å¼
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* åŠ¨æ€èƒŒæ™¯è£…é¥° */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 20%, rgba(245, 87, 108, 0.1) 0%, transparent 50%);
            animation: backgroundAnimation 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundAnimation {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
        }

        /* ========================================
           ğŸ—‚ï¸ é¡¶éƒ¨å¯¼èˆªæ æ ·å¼
           åŒ…å« Logoã€æ ‡é¢˜ã€æœç´¢æ¡†å’Œç”¨æˆ·ä¿¡æ¯
           ======================================== */
        .navbar {
            background: var(--bg-glass);
            backdrop-filter: var(--glass-blur);
            border-bottom: var(--glass-border);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            transition: var(--transition);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .navbar-logo {
            width: 40px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: var(--shadow-md);
        }

        .navbar-title {
            font-size: 1.5rem;
            font-weight: 600;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* æœç´¢æ¡†æ ·å¼ */
        .search-container {
            flex: 1;
            max-width: 500px;
            margin: 0 2rem;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            background: var(--bg-glass);
            border: var(--glass-border);
            border-radius: var(--border-radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            outline: none;
            transition: var(--transition);
        }

        .search-input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ */
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        /* ========================================
           ğŸ“Š ä¸»ä½“å¸ƒå±€ - ä¸‰æ å¼è®¾è®¡
           ======================================== */
        .main-container {
            display: grid;
            grid-template-columns: 250px 1fr 350px;
            gap: 1.5rem;
            padding: 1.5rem;
            height: calc(100vh - 72px);
        }

        /* ========================================
           ğŸ“ å·¦ä¾§è¾¹æ  - ä»»åŠ¡åˆ†ç±»å¯¼èˆª
           ======================================== */
        .sidebar {
            background: var(--bg-glass);
            backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            overflow-y: auto;
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            font-size: 0.875rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }

        /* å¯¼èˆªèœå•é¡¹ */
        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.3s ease;
            z-index: -1;
        }

        .nav-item:hover {
            transform: translateX(5px);
        }

        .nav-item:hover::before {
            width: 100%;
        }

        .nav-item.active {
            background: var(--primary-gradient);
            box-shadow: var(--shadow-md);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-count {
            margin-left: auto;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.125rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* é¡¹ç›®åˆ—è¡¨ */
        .project-list {
            margin-top: 1rem;
        }

        .project-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            margin-bottom: 0.25rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
        }

        .project-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .project-color {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        /* ========================================
           ğŸ“‹ ä¸­é—´åŒºåŸŸ - ä»»åŠ¡çœ‹æ¿
           ======================================== */
        .board-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            overflow-y: auto;
            padding: 0.5rem;
        }

        /* çœ‹æ¿åˆ— */
        .board-column {
            background: var(--bg-glass);
            backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            min-height: 500px;
            transition: var(--transition);
        }

        .board-column.drag-over {
            background: rgba(102, 126, 234, 0.1);
            border-color: var(--status-todo);
        }

        .column-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .column-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.125rem;
            font-weight: 600;
        }

        .column-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }

        .column-icon.todo { background: var(--status-todo); }
        .column-icon.doing { background: var(--status-doing); }
        .column-icon.done { background: var(--status-done); }

        .column-count {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.875rem;
        }

        /* æ·»åŠ ä»»åŠ¡æŒ‰é’® */
        .add-task-btn {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-sm);
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .add-task-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
            color: var(--text-primary);
        }

        /* ä»»åŠ¡å¡ç‰‡å®¹å™¨ */
        .tasks-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* ========================================
           ğŸƒ ä»»åŠ¡å¡ç‰‡æ ·å¼
           ======================================== */
        .task-card {
            background: var(--bg-glass);
            backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border-radius: var(--border-radius-sm);
            padding: 1rem;
            cursor: grab;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            background: rgba(255, 255, 255, 0.15);
        }

        .task-card.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        /* ä¼˜å…ˆçº§æŒ‡ç¤ºæ¡ */
        .task-priority-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }

        .task-priority-bar.high { background: var(--priority-high); }
        .task-priority-bar.medium { background: var(--priority-medium); }
        .task-priority-bar.low { background: var(--priority-low); }

        /* ä»»åŠ¡å¤´éƒ¨ */
        .task-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .task-type-icon {
            width: 32px;
            height: 32px;
            background: var(--primary-gradient);
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .task-menu {
            opacity: 0;
            transition: opacity 0.2s;
            cursor: pointer;
            color: var(--text-muted);
        }

        .task-card:hover .task-menu {
            opacity: 1;
        }

        /* ä»»åŠ¡å†…å®¹ */
        .task-content {
            margin-left: 40px;
        }

        .task-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .task-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* ä»»åŠ¡æ ‡ç­¾ */
        .task-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .task-tag {
            background: rgba(102, 126, 234, 0.2);
            color: #a5b4fc;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* ä»»åŠ¡åº•éƒ¨ä¿¡æ¯ */
        .task-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 0.75rem;
        }

        .task-date {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .task-date.overdue {
            color: var(--priority-high);
        }

        /* è¿›åº¦æ¡ */
        .task-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .task-progress-bar {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* ========================================
           ğŸ“ å³ä¾§è¾¹æ  - ä»»åŠ¡è¯¦æƒ…é¢æ¿
           ======================================== */
        .detail-panel {
            background: var(--bg-glass);
            backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            overflow-y: auto;
            transition: var(--transition);
        }

        .detail-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .detail-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .detail-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .detail-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* è¯¦æƒ…å†…å®¹åŒºåŸŸ */
        .detail-section {
            margin-bottom: 2rem;
        }

        .detail-section-title {
            font-size: 0.875rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }

        .detail-field {
            margin-bottom: 1rem;
        }

        .detail-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .detail-value {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            font-size: 0.95rem;
        }

        /* æ“ä½œæŒ‰é’® */
        .detail-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: var(--glass-border);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* ========================================
           ğŸ“Š ç»Ÿè®¡å›¾è¡¨åŒºåŸŸ
           ======================================== */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-glass);
            backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border-radius: var(--border-radius-sm);
            padding: 1rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* ========================================
           ğŸ¯ æ¨¡æ€æ¡†æ ·å¼
           ======================================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: var(--glass-border);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-glass);
            border: var(--glass-border);
            border-radius: var(--border-radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            outline: none;
            transition: var(--transition);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);
        }

        /* æ ‡ç­¾è¾“å…¥ */
        .tag-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0.75rem;
            background: var(--bg-glass);
            border: var(--glass-border);
            border-radius: var(--border-radius-sm);
            min-height: 44px;
        }

        .tag-input-item {
            background: var(--primary-gradient);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tag-remove {
            cursor: pointer;
            font-size: 1rem;
            line-height: 1;
        }

        /* ========================================
           ğŸ“± å“åº”å¼è®¾è®¡
           ======================================== */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 200px 1fr 300px;
            }
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar,
            .detail-panel {
                display: none;
            }
            
            .board-container {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
            }
            
            .search-container {
                display: none;
            }
            
            .board-container {
                grid-template-columns: 1fr;
            }
        }

        /* ========================================
           ğŸ­ åŠ¨ç”»æ•ˆæœ
           ======================================== */
        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-in-right {
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: var(--text-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ========================================
           ğŸ› ï¸ å·¥å…·ç±»
           ======================================== */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-muted { color: var(--text-muted); }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
    </style>
</head>
<body>
    <!-- ========================================
         ğŸ¯ é¡¶éƒ¨å¯¼èˆªæ 
         åŒ…å«åº”ç”¨ Logoã€æ ‡é¢˜ã€å…¨å±€æœç´¢å’Œç”¨æˆ·ä¿¡æ¯
         ======================================== -->
    <nav class="navbar">
        <div class="navbar-brand">
            <div class="navbar-logo">ğŸ“‹</div>
            <h1 class="navbar-title">ä»»åŠ¡ç®¡ç†çœ‹æ¿</h1>
        </div>
        
        <div class="search-container">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" placeholder="æœç´¢ä»»åŠ¡ã€é¡¹ç›®æˆ–æ ‡ç­¾...">
        </div>
        
        <div class="user-info">
            <button class="btn btn-primary" onclick="showCreateTaskModal()">
                <span>â•</span>
                <span>æ–°å»ºä»»åŠ¡</span>
            </button>
            <div class="user-avatar">U</div>
        </div>
    </nav>

    <!-- ========================================
         ğŸ“Š ä¸»ä½“å†…å®¹åŒºåŸŸ - ä¸‰æ å¸ƒå±€
         ======================================== -->
    <div class="main-container">
        <!-- ========================================
             ğŸ“ å·¦ä¾§è¾¹æ  - ä»»åŠ¡åˆ†ç±»å’Œé¡¹ç›®å¯¼èˆª
             ======================================== -->
        <aside class="sidebar">
            <!-- å¿«é€Ÿå¯¼èˆª -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">å¿«é€Ÿå¯¼èˆª</h3>
                <div class="nav-item active">
                    <span class="nav-icon">ğŸ“…</span>
                    <span>ä»Šæ—¥ä»»åŠ¡</span>
                    <span class="nav-count">5</span>
                </div>
                <div class="nav-item">
                    <span class="nav-icon">â­</span>
                    <span>é‡è¦ä»»åŠ¡</span>
                    <span class="nav-count">3</span>
                </div>
                <div class="nav-item">
                    <span class="nav-icon">ğŸ“Œ</span>
                    <span>å·²åŠ æ˜Ÿæ ‡</span>
                    <span class="nav-count">2</span>
                </div>
                <div class="nav-item">
                    <span class="nav-icon">âœ…</span>
                    <span>å·²å®Œæˆ</span>
                    <span class="nav-count">12</span>
                </div>
            </div>
            
            <!-- é¡¹ç›®åˆ—è¡¨ -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">æˆ‘çš„é¡¹ç›®</h3>
                <div class="project-list">
                    <div class="project-item">
                        <span class="project-color" style="background: #667eea;"></span>
                        <span>ç½‘ç«™é‡æ„</span>
                    </div>
                    <div class="project-item">
                        <span class="project-color" style="background: #f59e0b;"></span>
                        <span>ç§»åŠ¨åº”ç”¨å¼€å‘</span>
                    </div>
                    <div class="project-item">
                        <span class="project-color" style="background: #10b981;"></span>
                        <span>å¸‚åœºè¥é”€è®¡åˆ’</span>
                    </div>
                    <div class="project-item">
                        <span class="project-color" style="background: #ef4444;"></span>
                        <span>äº§å“è®¾è®¡</span>
                    </div>
                </div>
            </div>
            
            <!-- æ ‡ç­¾è¿‡æ»¤ -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">æ ‡ç­¾</h3>
                <div class="nav-item">
                    <span class="nav-icon">ğŸ·ï¸</span>
                    <span>å‰ç«¯å¼€å‘</span>
                    <span class="nav-count">8</span>
                </div>
                <div class="nav-item">
                    <span class="nav-icon">ğŸ·ï¸</span>
                    <span>è®¾è®¡</span>
                    <span class="nav-count">4</span>
                </div>
                <div class="nav-item">
                    <span class="nav-icon">ğŸ·ï¸</span>
                    <span>ä¼šè®®</span>
                    <span class="nav-count">2</span>
                </div>
            </div>
        </aside>

        <!-- ========================================
             ğŸ“‹ ä¸­é—´åŒºåŸŸ - çœ‹æ¿è§†å›¾
             åŒ…å«å¾…åŠã€è¿›è¡Œä¸­ã€å·²å®Œæˆä¸‰ä¸ªåˆ—
             ======================================== -->
        <main class="board-container">
            <!-- å¾…åŠåˆ— -->
            <div class="board-column" data-status="todo" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                <div class="column-header">
                    <div class="column-title">
                        <span class="column-icon todo">ğŸ“</span>
                        <span>å¾…åŠäº‹é¡¹</span>
                    </div>
                    <span class="column-count">4</span>
                </div>
                
                <button class="add-task-btn" onclick="showCreateTaskModal('todo')">
                    <span>â•</span>
                    <span>æ·»åŠ ä»»åŠ¡</span>
                </button>
                
                <div class="tasks-container" id="todo-tasks">
                    <!-- ç¤ºä¾‹ä»»åŠ¡å¡ç‰‡ 1 -->
                    <div class="task-card" draggable="true" ondragstart="handleDragStart(event)" data-task-id="1">
                        <div class="task-priority-bar high"></div>
                        <div class="task-header">
                            <div class="task-type-icon">ğŸ¯</div>
                            <div class="task-menu">â‹®</div>
                        </div>
                        <div class="task-content">
                            <h3 class="task-title">å®Œæˆé¡¹ç›®åŸå‹è®¾è®¡</h3>
                            <p class="task-description">ä½¿ç”¨ Figma è®¾è®¡æ–°ç‰ˆæœ¬çš„ç”¨æˆ·ç•Œé¢åŸå‹ï¼ŒåŒ…å«ä¸»è¦é¡µé¢å’Œäº¤äº’æµç¨‹</p>
                            <div class="task-tags">
                                <span class="task-tag">è®¾è®¡</span>
                                <span class="task-tag">é«˜ä¼˜å…ˆçº§</span>
                            </div>
                            <div class="task-footer">
                                <span class="task-date overdue">
                                    <span>ğŸ“…</span>
                                    <span>å·²é€¾æœŸ 2 å¤©</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç¤ºä¾‹ä»»åŠ¡å¡ç‰‡ 2 -->
                    <div class="task-card" draggable="true" ondragstart="handleDragStart(event)" data-task-id="2">
                        <div class="task-priority-bar medium"></div>
                        <div class="task-header">
                            <div class="task-type-icon">ğŸ’»</div>
                            <div class="task-menu">â‹®</div>
                        </div>
                        <div class="task-content">
                            <h3 class="task-title">å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½</h3>
                            <p class="task-description">å¼€å‘ç™»å½•ã€æ³¨å†Œã€å¿˜è®°å¯†ç ç­‰è®¤è¯ç›¸å…³åŠŸèƒ½æ¨¡å—</p>
                            <div class="task-tags">
                                <span class="task-tag">å‰ç«¯å¼€å‘</span>
                                <span class="task-tag">åŠŸèƒ½å¼€å‘</span>
                            </div>
                            <div class="task-footer">
                                <span class="task-date">
                                    <span>ğŸ“…</span>
                                    <span>æ˜å¤©åˆ°æœŸ</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è¿›è¡Œä¸­åˆ— -->
            <div class="board-column" data-status="doing" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                <div class="column-header">
                    <div class="column-title">
                        <span class="column-icon doing">ğŸš€</span>
                        <span>è¿›è¡Œä¸­</span>
                    </div>
                    <span class="column-count">2</span>
                </div>
                
                <button class="add-task-btn" onclick="showCreateTaskModal('doing')">
                    <span>â•</span>
                    <span>æ·»åŠ ä»»åŠ¡</span>
                </button>
                
                <div class="tasks-container" id="doing-tasks">
                    <!-- ç¤ºä¾‹ä»»åŠ¡å¡ç‰‡ 3 -->
                    <div class="task-card" draggable="true" ondragstart="handleDragStart(event)" data-task-id="3">
                        <div class="task-priority-bar high"></div>
                        <div class="task-header">
                            <div class="task-type-icon">ğŸ“Š</div>
                            <div class="task-menu">â‹®</div>
                        </div>
                        <div class="task-content">
                            <h3 class="task-title">æ•°æ®æŠ¥è¡¨å¼€å‘</h3>
                            <p class="task-description">ä½¿ç”¨ ECharts å¼€å‘æ•°æ®å¯è§†åŒ–æŠ¥è¡¨ï¼Œå±•ç¤ºå…³é”®ä¸šåŠ¡æŒ‡æ ‡</p>
                            <div class="task-tags">
                                <span class="task-tag">æ•°æ®å¯è§†åŒ–</span>
                                <span class="task-tag">å‰ç«¯å¼€å‘</span>
                            </div>
                            <div class="task-progress">
                                <div class="task-progress-bar" style="width: 65%;"></div>
                            </div>
                            <div class="task-footer">
                                <span class="task-date">
                                    <span>ğŸ“…</span>
                                    <span>æœ¬å‘¨äº”åˆ°æœŸ</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å·²å®Œæˆåˆ— -->
            <div class="board-column" data-status="done" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                <div class="column-header">
                    <div class="column-title">
                        <span class="column-icon done">âœ…</span>
                        <span>å·²å®Œæˆ</span>
                    </div>
                    <span class="column-count">3</span>
                </div>
                
                <div class="tasks-container" id="done-tasks">
                    <!-- ç¤ºä¾‹ä»»åŠ¡å¡ç‰‡ 4 -->
                    <div class="task-card" draggable="true" ondragstart="handleDragStart(event)" data-task-id="4">
                        <div class="task-priority-bar low"></div>
                        <div class="task-header">
                            <div class="task-type-icon">ğŸ“</div>
                            <div class="task-menu">â‹®</div>
                        </div>
                        <div class="task-content">
                            <h3 class="task-title">ç¼–å†™æŠ€æœ¯æ–‡æ¡£</h3>
                            <p class="task-description">å®Œæˆ API æ¥å£æ–‡æ¡£å’Œå¼€å‘æŒ‡å—çš„ç¼–å†™å·¥ä½œ</p>
                            <div class="task-tags">
                                <span class="task-tag">æ–‡æ¡£</span>
                            </div>
                            <div class="task-footer">
                                <span class="task-date">
                                    <span>âœ…</span>
                                    <span>æ˜¨å¤©å®Œæˆ</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ========================================
             ğŸ“ å³ä¾§è¾¹æ  - ä»»åŠ¡è¯¦æƒ…é¢æ¿
             ======================================== -->
        <aside class="detail-panel hidden" id="detailPanel">
            <div class="detail-header">
                <h2 class="detail-title">ä»»åŠ¡è¯¦æƒ…</h2>
                <div class="detail-close" onclick="hideDetailPanel()">âœ•</div>
            </div>
            
            <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-value">12</div>
                    <div class="stat-label">æœ¬å‘¨å®Œæˆ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">85%</div>
                    <div class="stat-label">å®Œæˆç‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">3</div>
                    <div class="stat-label">é€¾æœŸä»»åŠ¡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">24</div>
                    <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
                </div>
            </div>
            
            <!-- ä»»åŠ¡è¯¦æƒ…å†…å®¹ -->
            <div class="detail-section">
                <h3 class="detail-section-title">åŸºæœ¬ä¿¡æ¯</h3>
                <div class="detail-field">
                    <div class="detail-label">ä»»åŠ¡æ ‡é¢˜</div>
                    <div class="detail-value" id="detailTitle">-</div>
                </div>
                <div class="detail-field">
                    <div class="detail-label">ä»»åŠ¡æè¿°</div>
                    <div class="detail-value" id="detailDescription">-</div>
                </div>
                <div class="detail-field">
                    <div class="detail-label">ä¼˜å…ˆçº§</div>
                    <div class="detail-value" id="detailPriority">-</div>
                </div>
                <div class="detail-field">
                    <div class="detail-label">æˆªæ­¢æ—¥æœŸ</div>
                    <div class="detail-value" id="detailDueDate">-</div>
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="detail-actions">
                <button class="btn btn-primary">
                    <span>ğŸ“</span>
                    <span>ç¼–è¾‘</span>
                </button>
                <button class="btn btn-secondary">
                    <span>ğŸ—‘ï¸</span>
                    <span>åˆ é™¤</span>
                </button>
            </div>
        </aside>
    </div>

    <!-- ========================================
         ğŸ¯ åˆ›å»ºä»»åŠ¡æ¨¡æ€æ¡†
         ======================================== -->
    <div class="modal" id="createTaskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">åˆ›å»ºæ–°ä»»åŠ¡</h2>
                <div class="detail-close" onclick="hideCreateTaskModal()">âœ•</div>
            </div>
            
            <form id="createTaskForm">
                <div class="form-group">
                    <label class="form-label">ä»»åŠ¡æ ‡é¢˜</label>
                    <input type="text" class="form-input" id="taskTitle" placeholder="è¾“å…¥ä»»åŠ¡æ ‡é¢˜..." required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ä»»åŠ¡æè¿°</label>
                    <textarea class="form-textarea" id="taskDescription" placeholder="è¯¦ç»†æè¿°ä»»åŠ¡å†…å®¹..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ä»»åŠ¡ç±»å‹</label>
                    <select class="form-select" id="taskType">
                        <option value="task">ğŸ¯ ç›®æ ‡</option>
                        <option value="project">ğŸ“ é¡¹ç›®</option>
                        <option value="feature">ğŸ’» åŠŸèƒ½</option>
                        <option value="bug">ğŸ› ç¼ºé™·</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ä¼˜å…ˆçº§</label>
                    <select class="form-select" id="taskPriority">
                        <option value="high">ğŸ”´ é«˜ä¼˜å…ˆçº§</option>
                        <option value="medium">ğŸŸ¡ ä¸­ä¼˜å…ˆçº§</option>
                        <option value="low">ğŸŸ¢ ä½ä¼˜å…ˆçº§</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">æˆªæ­¢æ—¥æœŸ</label>
                    <input type="date" class="form-input" id="taskDueDate">
                </div>
                
                <div class="form-group">
                    <label class="form-label">æ ‡ç­¾</label>
                    <div class="tag-input-container" id="tagInputContainer">
                        <input type="text" class="form-input" id="tagInput" placeholder="è¾“å…¥æ ‡ç­¾åæŒ‰å›è½¦..." style="border: none; background: none; flex: 1; min-width: 120px;">
                    </div>
                </div>
                
                <div class="detail-actions">
                    <button type="submit" class="btn btn-primary">
                        <span>âœ…</span>
                        <span>åˆ›å»ºä»»åŠ¡</span>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="hideCreateTaskModal()">
                        <span>âŒ</span>
                        <span>å–æ¶ˆ</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        /* ========================================
           ğŸ¯ ä»»åŠ¡ç®¡ç†çœ‹æ¿ - JavaScript é€»è¾‘
           
           åŠŸèƒ½æ¨¡å—ï¼š
           1. ä»»åŠ¡æ•°æ®ç®¡ç†
           2. æ‹–æ‹½åŠŸèƒ½å®ç°
           3. æ¨¡æ€æ¡†æ§åˆ¶
           4. ä»»åŠ¡çš„å¢åˆ æ”¹æŸ¥
           5. æ•°æ®æŒä¹…åŒ–
           6. ä¸ MNTask æ’ä»¶é€šä¿¡
           ======================================== */

        // ========================================
        // ğŸ“Š ä»»åŠ¡æ•°æ®ç®¡ç†
        // ========================================
        
        // ä»»åŠ¡æ•°æ®å­˜å‚¨å¯¹è±¡
        let tasksData = {
            todo: [],
            doing: [],
            done: []
        };

        // å½“å‰é€‰ä¸­çš„ä»»åŠ¡
        let selectedTask = null;

        // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
        function initializeSampleData() {
            // è¿™é‡Œå¯ä»¥ä» localStorage æˆ–æ’ä»¶åŠ è½½æ•°æ®
            console.log('âœ… ä»»åŠ¡çœ‹æ¿åˆå§‹åŒ–å®Œæˆ');
        }

        // ========================================
        // ğŸ¯ æ‹–æ‹½åŠŸèƒ½å®ç°
        // ========================================
        
        // æ‹–æ‹½å¼€å§‹
        function handleDragStart(e) {
            const taskCard = e.target.closest('.task-card');
            if (!taskCard) return;
            
            // æ·»åŠ æ‹–æ‹½ä¸­çš„æ ·å¼
            taskCard.classList.add('dragging');
            
            // å­˜å‚¨æ‹–æ‹½çš„ä»»åŠ¡ID
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('taskId', taskCard.dataset.taskId);
            
            console.log('ğŸ¯ å¼€å§‹æ‹–æ‹½ä»»åŠ¡:', taskCard.dataset.taskId);
        }

        // æ‹–æ‹½ç»è¿‡
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            
            // æ·»åŠ æ‹–æ‹½æ‚¬åœæ•ˆæœ
            const column = e.target.closest('.board-column');
            if (column) {
                column.classList.add('drag-over');
            }
        }

        // æ‹–æ‹½ç¦»å¼€
        function handleDragLeave(e) {
            const column = e.target.closest('.board-column');
            if (column) {
                column.classList.remove('drag-over');
            }
        }

        // æ‹–æ‹½æ”¾ä¸‹
        function handleDrop(e) {
            e.preventDefault();
            
            const column = e.target.closest('.board-column');
            if (!column) return;
            
            // ç§»é™¤æ‹–æ‹½æ•ˆæœ
            column.classList.remove('drag-over');
            
            // è·å–æ‹–æ‹½çš„ä»»åŠ¡IDå’Œç›®æ ‡çŠ¶æ€
            const taskId = e.dataTransfer.getData('taskId');
            const newStatus = column.dataset.status;
            
            // ç§»åŠ¨ä»»åŠ¡åˆ°æ–°åˆ—
            moveTaskToColumn(taskId, newStatus);
            
            console.log('âœ… ä»»åŠ¡å·²ç§»åŠ¨åˆ°:', newStatus);
        }

        // æ‹–æ‹½ç»“æŸ
        document.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('task-card')) {
                e.target.classList.remove('dragging');
            }
        });

        // ç§»åŠ¨ä»»åŠ¡åˆ°æ–°åˆ—
        function moveTaskToColumn(taskId, newStatus) {
            // æ‰¾åˆ°ä»»åŠ¡å¡ç‰‡
            const taskCard = document.querySelector(`[data-task-id="${taskId}"]`);
            if (!taskCard) return;
            
            // æ‰¾åˆ°ç›®æ ‡å®¹å™¨
            const targetContainer = document.getElementById(`${newStatus}-tasks`);
            if (!targetContainer) return;
            
            // ç§»åŠ¨å¡ç‰‡
            targetContainer.appendChild(taskCard);
            
            // æ›´æ–°æ•°æ®ï¼ˆè¿™é‡Œéœ€è¦å®ç°æ•°æ®æ›´æ–°é€»è¾‘ï¼‰
            updateTaskStatus(taskId, newStatus);
            
            // æ›´æ–°åˆ—è®¡æ•°
            updateColumnCounts();
        }

        // æ›´æ–°ä»»åŠ¡çŠ¶æ€
        function updateTaskStatus(taskId, newStatus) {
            // å‘é€æ¶ˆæ¯åˆ°æ’ä»¶
            sendToPlugin('updateTaskStatus', {
                taskId: taskId,
                status: newStatus
            });
            
            // æ›´æ–°æœ¬åœ°æ•°æ®
            // TODO: å®ç°æ•°æ®æ›´æ–°é€»è¾‘
        }

        // æ›´æ–°åˆ—è®¡æ•°
        function updateColumnCounts() {
            const columns = ['todo', 'doing', 'done'];
            columns.forEach(status => {
                const container = document.getElementById(`${status}-tasks`);
                const count = container.children.length;
                const countElement = container.closest('.board-column').querySelector('.column-count');
                countElement.textContent = count;
            });
        }

        // ========================================
        // ğŸ¯ æ¨¡æ€æ¡†æ§åˆ¶
        // ========================================
        
        // æ˜¾ç¤ºåˆ›å»ºä»»åŠ¡æ¨¡æ€æ¡†
        function showCreateTaskModal(defaultStatus = 'todo') {
            const modal = document.getElementById('createTaskModal');
            modal.classList.add('active');
            
            // è®¾ç½®é»˜è®¤çŠ¶æ€
            document.getElementById('taskStatus')?.value = defaultStatus;
            
            // èšç„¦åˆ°æ ‡é¢˜è¾“å…¥æ¡†
            setTimeout(() => {
                document.getElementById('taskTitle').focus();
            }, 100);
        }

        // éšè—åˆ›å»ºä»»åŠ¡æ¨¡æ€æ¡†
        function hideCreateTaskModal() {
            const modal = document.getElementById('createTaskModal');
            modal.classList.remove('active');
            
            // é‡ç½®è¡¨å•
            document.getElementById('createTaskForm').reset();
            clearTags();
        }

        // æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…é¢æ¿
        function showDetailPanel(taskId) {
            const panel = document.getElementById('detailPanel');
            panel.classList.remove('hidden');
            panel.classList.add('slide-in-right');
            
            // åŠ è½½ä»»åŠ¡è¯¦æƒ…
            loadTaskDetail(taskId);
        }

        // éšè—ä»»åŠ¡è¯¦æƒ…é¢æ¿
        function hideDetailPanel() {
            const panel = document.getElementById('detailPanel');
            panel.classList.add('hidden');
        }

        // ========================================
        // ğŸ“ ä»»åŠ¡åˆ›å»ºå’Œç¼–è¾‘
        // ========================================
        
        // æ ‡ç­¾ç®¡ç†
        let currentTags = [];

        // æ ‡ç­¾è¾“å…¥å¤„ç†
        document.getElementById('tagInput')?.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                const input = e.target;
                const tag = input.value.trim();
                
                if (tag && !currentTags.includes(tag)) {
                    addTag(tag);
                    input.value = '';
                }
            }
        });

        // æ·»åŠ æ ‡ç­¾
        function addTag(tag) {
            currentTags.push(tag);
            
            const tagElement = document.createElement('div');
            tagElement.className = 'tag-input-item';
            tagElement.innerHTML = `
                <span>${tag}</span>
                <span class="tag-remove" onclick="removeTag('${tag}')">Ã—</span>
            `;
            
            const container = document.getElementById('tagInputContainer');
            const input = document.getElementById('tagInput');
            container.insertBefore(tagElement, input);
        }

        // ç§»é™¤æ ‡ç­¾
        function removeTag(tag) {
            currentTags = currentTags.filter(t => t !== tag);
            
            // ç§»é™¤DOMå…ƒç´ 
            const container = document.getElementById('tagInputContainer');
            const tags = container.querySelectorAll('.tag-input-item');
            tags.forEach(element => {
                if (element.textContent.includes(tag)) {
                    element.remove();
                }
            });
        }

        // æ¸…ç©ºæ ‡ç­¾
        function clearTags() {
            currentTags = [];
            const container = document.getElementById('tagInputContainer');
            const tags = container.querySelectorAll('.tag-input-item');
            tags.forEach(tag => tag.remove());
        }

        // åˆ›å»ºä»»åŠ¡è¡¨å•æäº¤
        document.getElementById('createTaskForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // æ”¶é›†è¡¨å•æ•°æ®
            const taskData = {
                id: Date.now().toString(),
                title: document.getElementById('taskTitle').value,
                description: document.getElementById('taskDescription').value,
                type: document.getElementById('taskType').value,
                priority: document.getElementById('taskPriority').value,
                dueDate: document.getElementById('taskDueDate').value,
                tags: [...currentTags],
                status: 'todo',
                createdAt: new Date().toISOString()
            };
            
            // åˆ›å»ºä»»åŠ¡
            createTask(taskData);
            
            // éšè—æ¨¡æ€æ¡†
            hideCreateTaskModal();
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            showNotification('âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼');
        });

        // åˆ›å»ºä»»åŠ¡
        function createTask(taskData) {
            // åˆ›å»ºä»»åŠ¡å¡ç‰‡HTML
            const taskCardHTML = createTaskCardHTML(taskData);
            
            // æ·»åŠ åˆ°å¯¹åº”çš„åˆ—
            const container = document.getElementById(`${taskData.status}-tasks`);
            container.insertAdjacentHTML('beforeend', taskCardHTML);
            
            // æ›´æ–°åˆ—è®¡æ•°
            updateColumnCounts();
            
            // å‘é€åˆ°æ’ä»¶
            sendToPlugin('createTask', taskData);
        }

        // åˆ›å»ºä»»åŠ¡å¡ç‰‡HTML
        function createTaskCardHTML(task) {
            const priorityClass = task.priority || 'medium';
            const typeIcon = getTaskTypeIcon(task.type);
            const tagsHTML = task.tags.map(tag => `<span class="task-tag">${tag}</span>`).join('');
            
            return `
                <div class="task-card fade-in" draggable="true" ondragstart="handleDragStart(event)" data-task-id="${task.id}">
                    <div class="task-priority-bar ${priorityClass}"></div>
                    <div class="task-header">
                        <div class="task-type-icon">${typeIcon}</div>
                        <div class="task-menu" onclick="showTaskMenu(event, '${task.id}')">â‹®</div>
                    </div>
                    <div class="task-content" onclick="showDetailPanel('${task.id}')">
                        <h3 class="task-title">${task.title}</h3>
                        <p class="task-description">${task.description}</p>
                        ${tagsHTML ? `<div class="task-tags">${tagsHTML}</div>` : ''}
                        <div class="task-footer">
                            <span class="task-date">
                                <span>ğŸ“…</span>
                                <span>${formatDueDate(task.dueDate)}</span>
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }

        // è·å–ä»»åŠ¡ç±»å‹å›¾æ ‡
        function getTaskTypeIcon(type) {
            const icons = {
                task: 'ğŸ¯',
                project: 'ğŸ“',
                feature: 'ğŸ’»',
                bug: 'ğŸ›'
            };
            return icons[type] || 'ğŸ“‹';
        }

        // æ ¼å¼åŒ–æˆªæ­¢æ—¥æœŸ
        function formatDueDate(dateString) {
            if (!dateString) return 'æ— æˆªæ­¢æ—¥æœŸ';
            
            const date = new Date(dateString);
            const today = new Date();
            const diffTime = date - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) {
                return `å·²é€¾æœŸ ${Math.abs(diffDays)} å¤©`;
            } else if (diffDays === 0) {
                return 'ä»Šå¤©åˆ°æœŸ';
            } else if (diffDays === 1) {
                return 'æ˜å¤©åˆ°æœŸ';
            } else if (diffDays <= 7) {
                return `${diffDays} å¤©ååˆ°æœŸ`;
            } else {
                return date.toLocaleDateString('zh-CN');
            }
        }

        // ========================================
        // ğŸ”§ å·¥å…·å‡½æ•°
        // ========================================
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'success') {
            // TODO: å®ç°é€šçŸ¥åŠŸèƒ½
            console.log(message);
        }

        // æ˜¾ç¤ºä»»åŠ¡èœå•
        function showTaskMenu(event, taskId) {
            event.stopPropagation();
            // TODO: å®ç°å³é”®èœå•åŠŸèƒ½
            console.log('æ˜¾ç¤ºä»»åŠ¡èœå•:', taskId);
        }

        // åŠ è½½ä»»åŠ¡è¯¦æƒ…
        function loadTaskDetail(taskId) {
            // TODO: ä»æ•°æ®æºåŠ è½½ä»»åŠ¡è¯¦æƒ…
            console.log('åŠ è½½ä»»åŠ¡è¯¦æƒ…:', taskId);
        }

        // ========================================
        // ğŸ”Œ ä¸ MNTask æ’ä»¶é€šä¿¡
        // ========================================
        
        // å‘é€æ¶ˆæ¯åˆ°æ’ä»¶
        function sendToPlugin(action, data = {}) {
            const message = {
                source: 'taskDashboard',
                action: action,
                data: data,
                timestamp: Date.now()
            };
            
            // æ„å»ºåè®®URL
            const url = `mntask://dashboard?message=${encodeURIComponent(JSON.stringify(message))}`;
            console.log('ğŸ“¤ å‘é€åˆ°æ’ä»¶:', message);
            
            // è§¦å‘URLåè®®
            window.location.href = url;
        }

        // æ¥æ”¶æ’ä»¶æ¶ˆæ¯
        window.receiveFromPlugin = function(action, jsonData) {
            console.log('ğŸ“¥ æ”¶åˆ°æ’ä»¶æ¶ˆæ¯:', action, jsonData);
            
            try {
                const data = JSON.parse(jsonData);
                
                switch(action) {
                    case 'loadTasks':
                        // åŠ è½½ä»»åŠ¡æ•°æ®
                        loadTasksFromPlugin(data);
                        break;
                        
                    case 'taskUpdated':
                        // ä»»åŠ¡æ›´æ–°é€šçŸ¥
                        showNotification(data.message || 'ä»»åŠ¡å·²æ›´æ–°');
                        break;
                        
                    case 'syncData':
                        // åŒæ­¥æ•°æ®
                        syncWithPlugin(data);
                        break;
                        
                    default:
                        console.log('æœªçŸ¥çš„æ“ä½œ:', action);
                }
            } catch (error) {
                console.error('âŒ å¤„ç†æ’ä»¶æ•°æ®å¤±è´¥:', error);
            }
        };

        // ä»æ’ä»¶åŠ è½½ä»»åŠ¡
        function loadTasksFromPlugin(data) {
            // TODO: å®ç°ä»æ’ä»¶åŠ è½½ä»»åŠ¡çš„é€»è¾‘
            console.log('ä»æ’ä»¶åŠ è½½ä»»åŠ¡:', data);
        }

        // ä¸æ’ä»¶åŒæ­¥æ•°æ®
        function syncWithPlugin(data) {
            // TODO: å®ç°æ•°æ®åŒæ­¥é€»è¾‘
            console.log('ä¸æ’ä»¶åŒæ­¥æ•°æ®:', data);
        }

        // ========================================
        // ğŸ¬ åˆå§‹åŒ–
        // ========================================
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ ä»»åŠ¡ç®¡ç†çœ‹æ¿å¯åŠ¨');
            
            // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
            initializeSampleData();
            
            // æ›´æ–°åˆ—è®¡æ•°
            updateColumnCounts();
            
            // è¯·æ±‚æ’ä»¶æ•°æ®
            setTimeout(() => {
                sendToPlugin('requestTasks');
            }, 100);
            
            // ç»‘å®šå…¨å±€äº‹ä»¶
            bindGlobalEvents();
        });

        // ç»‘å®šå…¨å±€äº‹ä»¶
        function bindGlobalEvents() {
            // ESC é”®å…³é—­æ¨¡æ€æ¡†
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const modal = document.querySelector('.modal.active');
                    if (modal) {
                        if (modal.id === 'createTaskModal') {
                            hideCreateTaskModal();
                        }
                    }
                }
            });
            
            // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        if (modal.id === 'createTaskModal') {
                            hideCreateTaskModal();
                        }
                    }
                });
            });
            
            // æœç´¢åŠŸèƒ½
            document.querySelector('.search-input')?.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                filterTasks(searchTerm);
            });
        }

        // ä»»åŠ¡ç­›é€‰
        function filterTasks(searchTerm) {
            const allCards = document.querySelectorAll('.task-card');
            
            allCards.forEach(card => {
                const title = card.querySelector('.task-title').textContent.toLowerCase();
                const description = card.querySelector('.task-description').textContent.toLowerCase();
                const tags = Array.from(card.querySelectorAll('.task-tag')).map(tag => tag.textContent.toLowerCase()).join(' ');
                
                const searchContent = `${title} ${description} ${tags}`;
                
                if (searchContent.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // ========================================
        // ğŸ“± å“åº”å¼å¤„ç†
        // ========================================
        
        // æ£€æµ‹ç§»åŠ¨è®¾å¤‡
        function isMobile() {
            return window.innerWidth <= 768;
        }

        // å¤„ç†å“åº”å¼å¸ƒå±€
        function handleResponsive() {
            if (isMobile()) {
                // ç§»åŠ¨ç«¯é€‚é…
                document.querySelector('.sidebar')?.classList.add('hidden');
                document.querySelector('.detail-panel')?.classList.add('hidden');
            }
        }

        // ç›‘å¬çª—å£å¤§å°å˜åŒ–
        window.addEventListener('resize', handleResponsive);

        // ========================================
        // ğŸ¨ ä¸»é¢˜åˆ‡æ¢ï¼ˆé¢„ç•™åŠŸèƒ½ï¼‰
        // ========================================
        
        // åˆ‡æ¢ä¸»é¢˜
        function toggleTheme() {
            const root = document.documentElement;
            const currentTheme = root.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            root.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        // åˆå§‹åŒ–ä¸»é¢˜
        loadTheme();

        /* ========================================
           ğŸ“š å¼€å‘è¯´æ˜å’Œå­¦ä¹ è¦ç‚¹
           
           è¿™ä¸ªä»»åŠ¡ç®¡ç†çœ‹æ¿å±•ç¤ºäº†ç°ä»£åŒ–çš„Webåº”ç”¨å¼€å‘æŠ€æœ¯ï¼š
           
           1. ğŸ¨ è§†è§‰è®¾è®¡
              - ä½¿ç”¨CSSå˜é‡å®ç°ä¸»é¢˜ç³»ç»Ÿ
              - ç»ç’ƒæ‹Ÿæ€(Glassmorphism)æ•ˆæœ
              - æ¸å˜è‰²å’ŒåŠ¨ç”»æ•ˆæœ
              - å“åº”å¼è®¾è®¡
           
           2. ğŸ—ï¸ æ¶æ„è®¾è®¡
              - æ¨¡å—åŒ–çš„ä»£ç ç»„ç»‡
              - äº‹ä»¶é©±åŠ¨çš„äº¤äº’è®¾è®¡
              - æ•°æ®ä¸è§†å›¾åˆ†ç¦»
              - æ’ä»¶é€šä¿¡æœºåˆ¶
           
           3. ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
              - æ‹–æ‹½APIå®ç°çœ‹æ¿åŠŸèƒ½
              - æ¨¡æ€æ¡†å’Œè¡¨å•å¤„ç†
              - å®æ—¶æœç´¢å’Œç­›é€‰
              - æ•°æ®æŒä¹…åŒ–
           
           4. ğŸ”§ æŠ€æœ¯è¦ç‚¹
              - CSS Gridå’ŒFlexboxå¸ƒå±€
              - CSSåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
              - åŸç”ŸJavaScriptäº‹ä»¶å¤„ç†
              - LocalStorageæ•°æ®å­˜å‚¨
           
           5. ğŸš€ æ‰©å±•æ–¹å‘
              - æ·»åŠ æ›´å¤šè§†å›¾ï¼ˆæ—¥å†ã€ç”˜ç‰¹å›¾ï¼‰
              - å®ç°åä½œåŠŸèƒ½
              - é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡
              - æ·»åŠ æ•°æ®ç»Ÿè®¡å’ŒæŠ¥è¡¨
           
           è¿™ä¸ªç¤ºä¾‹ä¸ºMNTaskæ’ä»¶æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€
           è§†è§‰ç¾è§‚çš„ä»»åŠ¡ç®¡ç†ç•Œé¢ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚
           è¿›è¡Œå®šåˆ¶å’Œæ‰©å±•ã€‚
           ======================================== */
    </script>
</body>
</html>