# MNTask 功能指南

MNTask 是一个强大的 MarginNote 任务管理插件，基于 OKR 理念设计，提供了完整的任务创建、管理、筛选和分析功能。

## 📋 目录

1. [核心概念](#核心概念)
2. [任务类型系统](#任务类型系统)
3. [任务状态管理](#任务状态管理)
4. [今日任务系统](#今日任务系统)
5. [任务筛选与排序](#任务筛选与排序)
6. [批量操作功能](#批量操作功能)
7. [看板管理](#看板管理)
8. [任务分析与建议](#任务分析与建议)
9. [读书任务管理](#读书任务管理)
10. [快捷操作](#快捷操作)
11. [使用技巧](#使用技巧)

## 核心概念

### 任务卡片格式
```
【类型｜状态】任务内容
```
- **类型**：目标、关键结果、项目、动作
- **状态**：未开始、进行中、已完成、已归档
- **路径**：显示任务层级关系（如：目标 >> 项目）

### 任务字段系统
每个任务卡片包含多个字段：
- **信息**：主字段，包含任务的基本信息
- **启动**：动作类型任务的启动方式（应用/URL）
- **所属**：链接到父任务
- **状态子字段**：📅 今日、🔥 优先级、⏰ 计划时间等

## 任务类型系统

### 1. 目标 (Objective) 🎯
- **用途**：定义要实现的大方向
- **示例**：【目标｜未开始】提升产品用户体验
- **特点**：
  - 通常是季度或年度目标
  - 包含多个关键结果
  - 颜色：深绿色

### 2. 关键结果 (Key Result) 📊
- **用途**：衡量目标完成度的具体指标
- **示例**：【关键结果｜进行中】用户满意度提升到 90%
- **特点**：
  - 必须可量化
  - 有明确的完成标准
  - 颜色：橙色

### 3. 项目 (Project) 📁
- **用途**：实现关键结果的具体项目
- **示例**：【项目｜进行中】重构用户界面
- **特点**：
  - 包含多个具体动作
  - 有明确的交付物
  - 颜色：蓝色

### 4. 动作 (Action) ⚡
- **用途**：可执行的具体任务
- **示例**：【动作｜未开始】设计新的导航栏
- **特点**：
  - 可以直接执行
  - 支持启动链接（应用/URL）
  - 颜色：黄色

## 任务状态管理

### 状态流转
```
未开始 😴 → 进行中 🔥 → 已完成 ✅ → 已归档 📦
```

### 状态说明
1. **未开始**：任务已创建但尚未开始
2. **进行中**：正在执行的任务
3. **已完成**：任务已完成但可能需要回顾
4. **已归档**：完全结束，存档备查

### 状态切换
- **单击**：向前切换状态（未开始→进行中→已完成→已归档）
- **长按菜单**：可以选择"退回上一个状态"

### 状态联动
- 子任务变为"进行中"时，父任务自动变为"进行中"
- 所有子任务完成时，系统会提示是否完成父任务

## 今日任务系统

### 标记今日任务
1. **单个标记**：选中任务 → 点击今日任务按钮
2. **批量标记**：选中多个任务 → 批量操作 → 批量标记为今日任务

### 今日任务字段
- **📅 今日**：标记为今日要完成的任务
- **🔥 优先级**：高/中/低
- **⏰ 计划时间**：如 09:00、14:30

### 今日看板
- 自动收集所有标记为"今日"的任务
- 智能排序：优先级高的、时间早的排在前面
- 支持一键刷新，更新看板内容

### 今日看板任务显示
从 v0.6.12 开始，今日看板采用**链接引用模式**，不再移动任务本身：
- **任务类型图标**：每个任务前显示类型图标，便于识别
  - 🎯 目标（Objective）
  - 📊 关键结果（Key Result）
  - 📁 项目（Project）
  - ▶️ 动作（Action）
- **优先级标记**：🔴高优先级、🟡中优先级、🟢低优先级
- **任务链接**：点击可直接跳转到原任务
- **自动统计**：显示任务总数、进行中、已完成等统计信息

**示例显示效果**：
```
## 🔴 高优先级
- ▶️🔴 09:00 [完成用户界面设计稿]
- 📁🔴 [重构用户界面项目]

## 🟡 中优先级  
- ▶️🟡 14:00 [编写单元测试]
- 📊🟡 [用户满意度提升到90%]

## 😴 未开始
- ▶️🟢 [整理会议纪要]
```

## 任务筛选与排序

### 预设筛选器
1. **🔥 重要且紧急**：高优先级 + 紧急度70分以上
2. **📅 今日任务**：标记了今日标签的任务
3. **⏰ 即将到期**：3天内到期的任务
4. **⚠️ 已逾期**：超过截止日期未完成
5. **📌 高优先级未完成**：高优先级且未完成的任务
6. **📊 本周任务**：本周内需要完成的任务
7. **🔍 停滞任务**：7天未更新的进行中任务
8. **✅ 待归档任务**：已完成但未归档的任务

### 自定义筛选
可以组合多个条件：
- 状态：未开始/进行中/已完成/已归档
- 优先级：高/中/低
- 标签：自定义标签
- 时间范围：指定起止日期
- 层级类型：顶层/叶子/父任务/独立任务

### 智能排序
**综合评分算法**：
- 优先级权重：30%
- 紧急度权重：30%
- 重要性权重：20%
- 进度权重：20%

**其他排序方式**：
- 按优先级排序
- 按日期排序（最早的在前）
- 按状态排序（进行中优先）
- 按层级排序（目标→动作）

## 批量操作功能

### 基础批量操作
1. **批量更新状态**：统一修改多个任务的状态
2. **批量设置优先级**：统一设置高/中/低优先级
3. **批量标记今日任务**：快速规划今日工作
4. **批量移动到看板**：整理任务到不同看板

### 高级批量操作
1. **批量添加标签**：为任务分组打标签
2. **批量设置截止日期**：统一设置 deadline
3. **批量归档已完成**：清理已完成的任务
4. **批量解除父任务链接**：解除任务间的关系

### 操作确认机制
- 重要操作会要求确认
- 显示操作结果：成功/失败数量
- 错误任务会记录原因

## 看板管理

### 看板类型
1. **目标看板**：存放所有目标
2. **项目看板**：存放所有项目
3. **动作看板**：存放具体动作
4. **已完成看板**：存放已完成任务
5. **今日看板**：存放今日任务

### 看板配置
在设置面板中可以：
- 绑定看板笔记
- 聚焦到指定看板
- 清空看板绑定
- 粘贴笔记 ID

### 看板使用流程
1. 创建一个笔记作为看板
2. 在设置中绑定该笔记
3. 任务会自动归类到对应看板
4. 支持手动移动任务到看板

## 任务分析与建议

### 任务统计
自动统计：
- 任务总数
- 各状态任务数量
- 各优先级分布
- 逾期任务数
- 今日到期数

### 智能建议
系统会分析并建议：
1. **紧急任务**：需要立即处理的任务
2. **可开始任务**：没有依赖，可以开始的任务
3. **需回顾任务**：长时间停滞的任务
4. **可归档任务**：已完成可以归档的任务
5. **需规划任务**：高优先级但无日期的任务

### 任务依赖检查
- 自动检测任务间的依赖关系
- 提示哪些任务被阻塞
- 建议先完成的前置任务

## 读书任务管理

MNTask v0.6.12 引入了专为学生设计的**灵活读书任务拆分系统**，支持渐进式任务创建和动态调整。

### 核心特性

1. **渐进式拆分**：不一次性创建所有任务，避免计划僵化
2. **动态调整**：根据实际完成情况自动调整后续计划
3. **灵活策略**：支持章节拆分、页码拆分、学习模板等多种方式
4. **智能分析**：自动分析进度并提供优化建议

### 拆分方式详解

#### 1. 按章节拆分 📚

适用于有明确章节结构的书籍，支持多层级章节管理。

**使用方法**：
1. 选择要拆分的读书任务
2. 点击"任务拆分"按钮 → "按章节拆分"
3. 选择拆分方式：
   - **简单拆分**：输入章节范围（如1-10）
   - **章节结构**：支持子章节（开发中）
   - **学习模板**：使用预设的学习阶段

**示例效果**：
```
📁 【项目】阅读《深度学习》
├── ▶️ 【动作】阅读第1章
├── ▶️ 【动作】阅读第2章
├── ▶️ 【动作】阅读第3章
└── ...
```

#### 2. 按页码渐进式拆分 📄

最灵活的拆分方式，特别适合需要根据进度调整的情况。

**使用方法**：
1. 选择读书任务，点击"按页数拆分"
2. 输入书籍总页数（如500页）
3. 设置每日阅读页数（默认20页）
4. 选择创建策略：
   - 创建3天任务（推荐）✅
   - 创建5天任务
   - 创建7天任务
   - 创建所有任务

**关键特性**：
- **进度追踪**：自动记录当前页码进度
- **智能调整**：根据历史完成率调整每日页数
- **今日标记**：第一个任务自动标记为今日任务

**示例效果**：
```
📁 【项目】阅读《算法导论》
├── ▶️ 【动作】阅读 P1-20  📅今日 🔴高
├── ▶️ 【动作】阅读 P21-40  🟡中
├── ▶️ 【动作】阅读 P41-60  🟡中
└── 信息：进度: 0/500页 (0%)，预计还需25天完成
```

#### 3. 学习任务模板 📖

为不同类型的学习任务提供最佳实践模板。

**标准学习模板**：
1. 预读：浏览目录和概要（中优先级）
2. 精读：深入理解核心概念（高优先级）
3. 总结：整理笔记和要点（高优先级）
4. 复习：巩固关键知识（中优先级）
5. 应用：完成练习或项目（高优先级）

**技术学习模板**：
1. 概览：了解技术背景（低优先级）
2. 环境：搭建开发环境（高优先级）
3. 示例：运行官方示例（中优先级）
4. 实践：编写测试代码（高优先级）
5. 项目：完成小型项目（高优先级）
6. 总结：编写学习笔记（中优先级）

**考试准备模板**：
1. 诊断：做诊断测试（高优先级）
2. 基础：复习基础知识（高优先级）
3. 重点：攻克重难点（高优先级）
4. 练习：大量刷题（高优先级）
5. 模拟：全真模拟考试（高优先级）
6. 查漏：补充薄弱环节（中优先级）

### 动态调整机制

系统会自动分析任务完成情况并提供调整建议：

**分析维度**：
- 完成率：已完成任务占比
- 逾期情况：是否有任务超期
- 进度趋势：实际vs计划进度
- 今日分配：是否有今日任务

**自动调整**：
1. **逾期任务多**→ 建议减少每日任务量
2. **完成率高**（>80%）→ 可增加每日任务量
3. **今日无任务**→ 自动分配下一个未开始任务

**使用方法**：
- 在已有拆分的任务上再次使用"按页数拆分"
- 系统会检测现有进度并提供分析
- 选择"是否分析并调整计划"

### 最佳实践建议

#### 1. 初次规划
- 先创建3天的任务，不要一次规划太远
- 根据书籍难度合理设置每日页数
- 技术书籍：10-15页/天
- 文学作品：30-50页/天
- 教科书籍：15-25页/天

#### 2. 持续调整
- 每完成2-3个任务后评估进度
- 根据实际情况调整后续计划
- 利用系统的自动分析功能

#### 3. 配合其他功能
- 使用"今日任务"系统管理每日阅读
- 设置优先级区分重要章节
- 添加笔记链接记录读书笔记

#### 4. 常见场景

**场景1：考试复习**
```
1. 创建主任务：【目标】通过算法考试
2. 使用考试模板创建阶段任务
3. 对"练习"阶段按章节拆分刷题任务
4. 每日标记3-5个题目为今日任务
```

**场景2：技术学习**
```
1. 创建主任务：【项目】学习React框架
2. 使用技术模板创建学习路径
3. 对"实践"阶段按功能模块拆分
4. 配合启动链接直接打开IDE
```

**场景3：读书计划**
```
1. 创建主任务：【项目】阅读《人类简史》
2. 按页码渐进式拆分（每天30页）
3. 每3天创建一次新任务
4. 根据实际进度动态调整
```

### 注意事项

1. **避免过度规划**：不要一次创建太多任务
2. **及时更新状态**：完成后立即标记，便于系统分析
3. **合理设置优先级**：重要章节设置高优先级
4. **记录学习笔记**：利用MarginNote的笔记功能
5. **定期回顾调整**：每周回顾并调整计划

## 自定义字段管理 📋

### 字段管理统一入口

MNTask v0.6.13 新增了强大的字段管理功能，让你可以灵活组织任务卡片的信息结构。

#### 主要功能

1. **📝 添加新字段**
   - 自动添加到信息字段的最上方（紧挨着信息字段）
   - 两步操作：输入字段名 → 输入内容
   - 无需选择位置，简化操作流程

2. **✏️ 编辑现有字段**
   - 快速修改已有字段的内容
   - 保持字段格式和样式

3. **📋 管理字段内容**
   - **多选支持**：可以同时选择多个字段或评论
   - **移动功能**：选择精确的目标位置（字段前后或信息字段顶部/底部）
   - **删除功能**：批量删除不需要的内容
   - **平铺显示**：直接显示所有内容，一目了然

#### 使用方法

1. **访问字段管理**
   - 选中任务卡片
   - 长按"任务管理"按钮
   - 在"字段处理"菜单中选择"📋 字段管理"

2. **添加自定义字段的步骤**
   - 第一步：输入字段名称
   - 第二步：输入字段内容（可选）
   - 自动添加到信息字段最上方

3. **管理字段内容的流程**
   - 选择"管理字段内容"
   - 在单一对话框中查看所有内容并多选
   - 选择"移动"或"删除"操作
   - 如果选择移动，可精确选择在某个字段前后的位置

#### 实际应用场景

1. **项目信息整理**
   - 添加"负责人"、"截止日期"等自定义字段
   - 将相关信息移动到对应字段下

2. **学习任务管理**
   - 添加"学习资料"、"练习题目"等字段
   - 灵活组织学习内容

3. **会议记录整理**
   - 添加"决议事项"、"待办事项"等字段
   - 快速归类会议内容

#### 注意事项

1. 字段管理功能仅适用于任务卡片
2. 删除操作不可恢复，请谨慎使用
3. 移动内容时会保持原有格式
4. 支持批量操作，提高效率

## 快捷操作

### 工具栏按钮
1. **任务管理**：单击智能制卡，长按显示完整菜单
2. **进度追踪**：单击切换状态，长按显示状态菜单
3. **今日任务**：单击标记今日，长按显示时间管理菜单
4. **快速筛选**：单击进入筛选器，长按显示筛选菜单

### 键盘快捷键
（需要在 MarginNote 中设置）
- 快速创建任务
- 切换任务状态
- 标记今日任务

## 使用技巧

### 1. 任务规划流程
```
创建目标 → 分解为关键结果 → 创建项目 → 拆分为动作
```

### 2. 日常使用流程
```
早上：筛选本周任务 → 标记今日任务 → 设置优先级
工作中：更新任务状态 → 记录进展
晚上：回顾今日完成 → 归档已完成 → 规划明日
```

### 3. 周期性整理
- **每日**：更新今日看板，归档完成任务
- **每周**：分析任务报告，调整优先级
- **每月**：回顾目标进展，调整关键结果

### 4. 最佳实践
1. **任务粒度**：动作应该是 1-4 小时可完成的
2. **及时更新**：状态变化及时更新
3. **定期清理**：已完成的任务及时归档
4. **合理分类**：充分利用标签系统
5. **依赖管理**：明确标注任务间的依赖关系

### 5. 注意事项
- 任务标题不要过长，详细信息放在评论中
- 重要任务设置截止日期
- 利用颜色区分不同类型的任务
- 定期使用任务分析功能，及时调整计划

## 更新日志

### v0.6.13 (2025-01)
- **新增**：字段管理统一入口（manageCustomFields）
- **简化**：自定义字段自动添加到信息字段顶部，无需选择位置
- **新增**：字段内容多选管理功能
- **新增**：支持批量移动和删除字段内容
- **优化**：字段内容平铺显示，操作更直观
- **优化**：移动位置选择更精确（字段前后）

### v0.6.12 (2025-01)
- **今日看板优化**：
  - 改为链接引用模式，不再移动任务本身
  - 添加任务类型图标显示（🎯📊📁▶️）
  - 修复重复内容问题
- **读书任务管理系统**：
  - 支持按章节拆分（含多层级）
  - 按页码渐进式拆分（不一次拆完）
  - 动态调整机制（根据进度自动优化）
  - 三种学习模板（标准/技术/考试）
- **智能制卡优化**：
  - 自动推断任务类型（目标→关键结果→项目）
  - 减少不必要的类型选择对话框

### v0.0.0 (初始版本)
- 基础任务管理功能
- OKR 层级系统（目标、关键结果、项目、动作）
- 任务状态管理（未开始、进行中、已完成、已归档）
- 今日任务系统
- 智能筛选引擎
- 批量操作功能
- 任务分析与建议
- 看板管理

---

💡 **提示**：MNTask 会持续更新，建议关注项目更新以获取最新功能。