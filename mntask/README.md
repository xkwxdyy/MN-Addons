# MNTask - MarginNote 任务管理插件

## 📋 简介

MNTask 是一个专为 MarginNote 设计的任务管理插件，将 MarginNote 的卡片系统转化为强大的任务管理工具。通过巧妙利用卡片的层级结构、链接功能和颜色标记，让你的学习任务管理更加高效有序。

## ✨ 核心特性

### 1. 任务即卡片
- 每个任务都是一张 MarginNote 卡片
- 充分利用卡片的所有功能：层级、链接、标签、颜色等
- 任务与学习内容深度整合

### 2. 智能进度管理
- 可视化进度条显示任务完成情况
- 支持百分比进度更新
- 子任务进度自动汇总到父任务

### 3. 任务拆分系统
- 支持创建多层级子任务
- 父子任务进度联动
- 适合管理复杂的学习项目

### 4. 灵活的筛选系统
- 今日任务：快速查看今天需要完成的任务
- 进行中：查看所有活跃任务
- 已完成：回顾完成的任务
- 全部任务：完整的任务列表

### 5. 任务与内容绑定
- 可将任务绑定到特定的学习卡片
- 点击任务可快速跳转到相关学习内容
- 实现任务与知识的紧密关联

### 6. 美观的 WebView 界面
- 现代化的任务管理界面
- 响应式设计，适配不同屏幕
- 直观的交互体验

## 🚀 快速开始

### 安装插件

1. 下载 mntask.mnaddon 文件
2. 将文件拖入 MarginNote
3. 重启 MarginNote

### 基本使用

#### 创建任务

**方法一：从选中文本创建**
1. 选中文档中的文本
2. 右键菜单选择"📋 创建任务"
3. 任务将以选中文本为标题创建

**方法二：将现有卡片转为任务**
1. 右键点击任意卡片
2. 选择"📋 转为任务"
3. 卡片将转换为任务格式

**方法三：快速添加**
1. 打开任务管理器
2. 在顶部输入框输入任务标题
3. 按回车或点击"添加"按钮

#### 管理任务

**更新进度**
1. 右键点击任务卡片
2. 选择"📊 更新进度"
3. 输入完成百分比（0-100）

**标记完成**
1. 右键点击任务卡片
2. 选择"✅ 标记完成"
3. 任务将标记为已完成状态

**设为今日任务**
1. 右键点击任务卡片
2. 选择"📌 设为今日任务"
3. 任务将添加 #今日任务 标签

#### 任务拆分

1. 在任务管理器中点击任务
2. 选择"➕ 添加子任务"
3. 输入子任务标题
4. 子任务将自动关联到父任务

## 📊 任务数据结构

每个任务卡片包含以下信息：

```
标题：【任务】任务名称
颜色：根据状态自动设置
  - 灰色(13)：待办
  - 蓝色(6)：进行中
  - 绿色(5)：已完成
  - 红色(7)：已过期

评论（元数据）：
  - [进度] 25%
  - [状态] 进行中
  - [开始] 2024-01-15
  - [截止] 2024-02-15
  - [优先级] high
  - [绑定] marginnote4app://note/xxx
  - [描述] 任务的详细描述

标签：
  - #今日任务
  - #高优先级
  - 自定义标签...

子卡片：
  - 【子任务】子任务1
  - 【子任务】子任务2
```

## 🎨 界面说明

### 任务管理器界面

```
┌─────────────────────────┐
│ 📋 任务管理器           │  <- 标题栏，可拖动
├─────────────────────────┤
│ [今日] [进行中] [全部]  │  <- 筛选标签
├─────────────────────────┤
│ 快速添加任务...  [添加] │  <- 快速添加栏
├─────────────────────────┤
│ ▼ 进行中 (3)           │  <- 任务分组
│   • 任务1         75%   │  <- 任务项
│   • 任务2         30%   │
│                         │
│ ▼ 待办 (5)             │
│   • 任务3         0%    │
└─────────────────────────┘
      [+]                    <- 浮动按钮
```

### 任务卡片颜色说明

- 🔘 灰色：待办任务
- 🔵 蓝色：进行中
- 🟢 绿色：已完成
- 🔴 红色：已过期

### 优先级标记

- 🔴 紧急（urgent）
- 🟠 高优先级（high）
- 🔵 普通（normal）
- ⚫ 低优先级（low）

## 🛠️ 高级功能

### 任务绑定

将任务与特定的学习内容绑定：
1. 创建任务时，如果从某个卡片创建，会自动绑定
2. 点击已绑定的任务会跳转到对应的学习内容
3. 可以手动解除绑定

### 批量操作

在任务管理器中：
- 支持快速切换任务状态
- 批量更新任务标签
- 一键清理已完成任务

### 智能提醒

- 任务接近截止日期时颜色变化
- 过期任务自动标记
- 今日任务优先显示

## 📝 最佳实践

### 1. 任务命名
- 使用清晰、具体的任务名称
- 包含关键信息，如"读完第3章"
- 避免过于笼统的描述

### 2. 任务拆分
- 大任务拆分成可执行的小任务
- 每个子任务应该可以在1-2小时内完成
- 利用层级结构组织复杂项目

### 3. 进度更新
- 定期更新任务进度
- 完成子任务时及时标记
- 利用进度反馈保持动力

### 4. 标签使用
- 使用 #今日任务 管理每日计划
- 创建项目标签组织相关任务
- 利用标签进行批量筛选

## 🔧 故障排除

### 任务管理器打不开
1. 确保 MNUtils 已安装并启用
2. 重启 MarginNote
3. 检查插件是否正确加载

### 任务创建失败
1. 确保在笔记本中操作
2. 检查是否有选中内容
3. 查看是否有权限问题

### 进度不更新
1. 确保输入的是 0-100 的数字
2. 检查任务是否被锁定
3. 尝试刷新任务列表

## 🤝 贡献与反馈

如果你有任何建议或发现了问题，欢迎：
- 提交 Issue
- 贡献代码
- 分享使用经验

## 📄 许可证

MIT License

---

**版本**: 1.0.0  
**作者**: xiakangwei  
**支持**: MarginNote 3.7.11+