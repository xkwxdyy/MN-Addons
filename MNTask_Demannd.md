下面开发 mntask 项目。
1. 一旦修改代码，就需要按照修改的内容程度来改 mnaddon.json 的版本号。
2. 任何更新，尤其是新功能，要在 mntask_guide.md 里详细更新。
---
请你精读 mnutils 项目和 mntoolbar 项目，学习他们是如何调用 html 来扩展内容的，尤其是 mnutils 的 log 信息 有一个 log viewer 就是结合了 html 来实现的！
这样的话看看能否把今日看板之类的功能能否结合 HTML 来实现？这样可以设计更好的 UI 以及可以更好地展示内容了。
ultrathink
---
增加检查看板。下面详细解释。

---
1. “切换类型”的话，需要查看下面有没有“包含”和状态字段，动作卡片不需要！
2. 状态的话：“已阻塞”和“已取消”都去掉
3. “getOKRNotesOnToday”报错：获取OKR任务失败：MNTaskManager，getAllTaskCardsFromBoard is nota function. （In'MNTaskManager getAllTaskCardsFromBoard （rootNote）， MNTaskManager.getAllTaskCardsFromBoard is undefined
4. 今日看板刷新功能失效，看板里一直是空的！





--
请你分析几个按钮里单击、菜单里的功能，然后分析功能的合理性，在 guide 文件里加入你尽可能想到的基于这些功能合理的工作流。

然后再看看菜单里的功能，哪些没有实现？或者工作流过程中遇到了什么痛点？有的话去写新功能。
然后看看目前菜单的顺序，以及功能在这个菜单会不会有歧义，有没有问题之类的，进行综合分析！
ultrathink

---
开发一个新的按钮，能够快速启动任务。我的想法是：
1. 启动的任务怎么确定？
  - 目前就是默认按照今日看板进行中任务顺序，所以那个需要按照优先级之类的进行排序（不知道是不是已经是这样的了）
    - 我突然想到，今日看板需要支持我能手动修改排序，比如今天有好几个高优先级的，但是这几个仍然有个一个顺序，所以你看看我怎么样修改排序方便点？比如弹窗？这个需要你综合考察 mnai 和 mntoolbar 里开发的功能来看看能否从什么地方借鉴一下
    - 比如前面已经有高优先级的了，后面再加的话，默认放在高优先级组的后面，不然可能打乱手动排序的顺序
  - 然后单击后确定的卡片就是进行中的第一张
2. 启动的任务怎么处理？
  - 确定好卡片后，就是将这样卡片在浮窗中显示
3. 多选菜单
   1. 虽然单击支持自动选，但是还是加一个是通过弹窗来选择，你可以参考“今日”任务里筛选的效果，其实基于那个就可以，那个默认弹窗点击后是直接跳转，但我们这里是在浮窗跳转就行
   2. 之前加过快速更新“启动”链接的功能，这里也加一个

在上面的基础上，增加下面的处理：
1. “启动”链接的更新，需要支持剪切板里是卡片 ID 或者 URL 的，如果是的话，转化为 URL 格式替换旧链接。
2. 如果上面单击后确定的那张任务卡片的“启动”里的 URL 是卡片链接，而不是 uistate 的链接，那么直接定位这张卡，注意这里就不太一样了，如果是 uistate，那么就需要在浮窗中显示这张卡片的内容，如果是卡片链接，那么直接定位到这张卡片。

暂时我想到的就这么多，这个按钮的目的就是
1. 没进行任务的时候能够快速找到需要做的任务，然后我点击“启动”快速启动
2. 你看看还有没有别的探索可能性？至少我说的你要先实现  ultrathink

---
目前开发的按钮功能包括菜单里的，仍然有很多有问题！请你进行一遍详细的自查与修复 ultrathink

---
添加任务记录这些功能应该放在字段记录的那个按钮里，而不是任务状态切换的按钮 ultrathink


---
设置优先级功能出问题了，没有弹窗，而是直接加了 `<span id="subField" style="background:#FFF;color:#FF8C5A;border:2px solid currentColor;border-radius:3px;padding:6px 12px;font-size:0.9em;font-weight:600;box-shadow:0 1px 3px rgba(255,140,90,0.2);display:inline-block;">🔥 优先级: ⚪ undefined</span>` 请修复 ultrathink

---
过期任务功能现在很不完善！看板里虽然会增加有几个过期任务，但我看不到哪些过期了，“使用「处理过期任务」功能管理”，这个提示也没用啊，也没这个功能。

筛选的功能也有大问题，请你仔细重新检查。ultrathink

---
MNTask 里关于任务记录的几个功能，没几个能用的，要不就是点击没反应，请仔细检查！ ultrathink



---
我发现 MNTask 里用了 MNMath 的 toNoExcerptVersion 函数，并且很多次，但这个其实和 math 无关，我觉得要不就把 toNoExcerptVersion 函数的实现写到 mntask 里的辅助类里，避免对 MNMath 类有依赖，因为 MNMath 是扩展部分，不是官方原生的功能。ultrathink

---
重新完善一下按钮和菜单功能，支持单击和长按弹出菜单。感觉现在的太多太乱了。有很多内容只有个框架，先暂时去掉。把用到 MNTaskManager 和 TaskFieldUtils 的这些功能留着，其余没用到的先删除，不然现在菜单里东西太多，我不知道哪些已经开发了。ultrathink

---
请继续开发新功能：目前任务没有一个记录系统，类似于时间戳的那种，即使是动作任务可能也会有几步，所以需要一个记录系统来记录每个任务的完成情况，也就是类似于百分比的那种感觉，但是可以让用户记录每个步骤都做了什么，完成的怎么样，也类似于任务日志的东西


请学习一下 mnai 项目了解插件更多的处理可能性以及一些结合插件实现的操作， mnutils 项目学习基础 API。
然后我希望你思考

---
1. 自定义字段的添加优化一下，目前是默认加在`信息`字段的最下方。

默认制卡是加了`所属`，然后下方是`启动`，之后的新加就默认加在 `信息` 字段的下方，视觉上就是不断往上叠加，而不是从下面加入的。


2. 请学习 MNMath.manageCommentsByPopup 函数，解析字段内容，可以多选，然后进行移动和删除，mntask 里可以简单很多，因为没有 HtmlComment 类型的字段。只需要按照 id 那个来逐层解析，比如是先按 mainField 然后是 subField。
3. 至于如何获取新内容以及最后一个评论，这个暂时不要，目前就是
   - 选择字段
   - 多选
  然后类似地可以选择移动或删除。
4. 新功能加完了之后把这个写到按钮菜单里面。