# MNTask 功能指南

MNTask 是一个强大的 MarginNote 任务管理插件，基于 OKR 理念设计，提供了完整的任务创建、管理、筛选和分析功能。

## 📋 目录

1. [核心概念](#核心概念)
2. [任务类型系统](#任务类型系统)
3. [任务状态管理](#任务状态管理)
4. [今日任务系统](#今日任务系统)
5. [任务筛选与排序](#任务筛选与排序)
6. [批量操作功能](#批量操作功能)
7. [看板管理](#看板管理)
8. [任务分析与建议](#任务分析与建议)
9. [读书任务管理](#读书任务管理)
10. [快捷操作](#快捷操作)
11. [使用技巧](#使用技巧)

## 核心概念

### 任务卡片格式
```
【类型｜状态】任务内容
```
- **类型**：目标、关键结果、项目、动作
- **状态**：未开始、进行中、已完成、已归档
- **路径**：显示任务层级关系（如：目标 >> 项目）

### 任务字段系统
每个任务卡片包含多个字段：
- **信息**：主字段，包含任务的基本信息
- **启动**：动作类型任务的启动方式（应用/URL）
- **所属**：链接到父任务
- **状态子字段**：📅 今日、🔥 优先级、⏰ 计划时间等

## 任务类型系统

### 1. 目标 (Objective) 🎯
- **用途**：定义要实现的大方向
- **示例**：【目标｜未开始】提升产品用户体验
- **特点**：
  - 通常是季度或年度目标
  - 包含多个关键结果
  - 颜色：深绿色

### 2. 关键结果 (Key Result) 📊
- **用途**：衡量目标完成度的具体指标
- **示例**：【关键结果｜进行中】用户满意度提升到 90%
- **特点**：
  - 必须可量化
  - 有明确的完成标准
  - 颜色：橙色

### 3. 项目 (Project) 📁
- **用途**：实现关键结果的具体项目
- **示例**：【项目｜进行中】重构用户界面
- **特点**：
  - 包含多个具体动作
  - 有明确的交付物
  - 颜色：蓝色

### 4. 动作 (Action) ⚡
- **用途**：可执行的具体任务
- **示例**：【动作｜未开始】设计新的导航栏
- **特点**：
  - 可以直接执行
  - 支持启动链接（应用/URL）
  - 颜色：黄色

## 任务状态管理

### 状态流转
```
未开始 😴 → 进行中 🔥 → 已完成 ✅ → 已归档 📦
```

### 状态说明
1. **未开始**：任务已创建但尚未开始
2. **进行中**：正在执行的任务
3. **已完成**：任务已完成但可能需要回顾
4. **已归档**：完全结束，存档备查

### 状态切换
- **单击**：向前切换状态（未开始→进行中→已完成→已归档）
- **长按菜单**：可以选择"退回上一个状态"

### 状态联动
- 子任务变为"进行中"时，父任务自动变为"进行中"
- 所有子任务完成时，系统会提示是否完成父任务

## 今日任务系统

### 标记今日任务
1. **单个标记**：选中任务 → 点击今日任务按钮
2. **批量标记**：选中多个任务 → 批量操作 → 批量标记为今日任务

### 今日任务字段
- **📅 今日 (YYYY-MM-DD)**：标记为今日要完成的任务（自动记录日期）
- **⚠️ 过期X天 (YYYY-MM-DD)**：标记过期未完成的任务
- **🔥 优先级**：高/中/低
- **⏰ 计划时间**：如 09:00、14:30

### 今日看板
- 自动收集所有标记为"今日"的任务
- 智能排序：优先级高的、时间早的排在前面
- 支持一键刷新，更新看板内容
- **过期检测**：自动检测并提示处理过期的今日任务

### 今日看板任务显示
从 v0.6.12 开始，今日看板采用**链接引用模式**，不再移动任务本身：
- **任务类型图标**：每个任务前显示类型图标，便于识别
  - 🎯 目标（Objective）
  - 📊 关键结果（Key Result）
  - 📁 项目（Project）
  - ▶️ 动作（Action）
- **优先级标记**：🔴高优先级、🟡中优先级、🟢低优先级
- **任务链接**：点击可直接跳转到原任务
- **自动统计**：显示任务总数、进行中、已完成等统计信息

**示例显示效果**：
```
## 🔴 高优先级
- ▶️🔴 09:00 [完成用户界面设计稿]
- 📁🔴 [重构用户界面项目]

## 🟡 中优先级  
- ▶️🟡 14:00 [编写单元测试]
- 📊🟡 [用户满意度提升到90%]

## 😴 未开始
- ▶️🟢 [整理会议纪要]
```

### 过期任务处理

从 v0.6.14 开始，MNTask 智能处理未完成的今日任务：

#### 自动检测
- 刷新今日看板时自动检测过期任务
- 过期任务指标记日期不是今天的"今日"任务
- 系统会记录任务被标记为"今日"的具体日期

#### 处理选项
1. **🔄 保持不变**：继续保留今日标记
2. **⚠️ 标记为过期**：改为"过期X天"标记，醒目提醒
3. **📅 更新为今天**：刷新日期，作为今天的任务
4. **❌ 移除标记**：取消今日标记
5. **📋 逐个处理**：对每个过期任务单独决定

#### 使用方法
- **刷新时处理**：刷新今日看板时自动提示
- **主动处理**：今日任务菜单 → 处理过期任务
- **批量操作**：支持一次处理所有过期任务

#### 最佳实践
- 每天早上刷新看板，及时处理昨日未完成任务
- 根据任务性质选择合适的处理方式
- 重要任务建议"更新为今天"继续跟进
- 已失效任务及时"移除标记"

## 快速启动系统

MNTask v0.7.0 新增的快速启动功能，让你能够一键开始工作，专注于最重要的任务。

### 核心功能

#### 1. 一键启动任务
**使用方法**：单击"快速启动"按钮

**功能说明**：
- 自动获取今日看板中第一个进行中的任务
- 根据任务的"启动"字段智能处理：
  - **UI状态链接**：在浮窗中显示任务卡片内容，方便查看任务详情
  - **卡片链接**：直接定位到链接的卡片（如项目文档、参考资料）
  - **外部URL**：打开对应的应用或网页（如 Obsidian、Notion 等）
- 如果任务没有启动链接，会提示并定位到该任务

#### 2. 选择任务启动
**使用方法**：长按"快速启动"按钮 → 选择"选择并启动任务"

**功能说明**：
- 显示所有进行中任务的列表
- 每个任务显示优先级图标（🔴高/🟡中/⚪低）
- 有启动链接的任务会显示 🔗 图标
- 选择后根据链接类型进行相应处理

#### 3. 更新启动链接
**使用方法**：长按"快速启动"按钮 → 选择"更新启动链接"

**剪贴板智能识别**：
- **卡片ID**：32位字符串自动转换为卡片链接
- **MarginNote URL**：自动识别并使用
- **外部网址**：自动提取域名作为链接文本
- 如果剪贴板没有有效链接，显示应用选择对话框

**支持的应用**：
- Obsidian、Notion、Things、OmniFocus
- Bear、Craft、Logseq、RemNote、Roam
- 默认启动（MarginNote UI状态）

#### 4. 调整任务顺序
**使用方法**：长按"快速启动"按钮 → 选择"调整任务顺序"

**交互式排序界面**：
- 显示当前进行中任务列表
- 选择任务后可以：
  - ⬆️ 上移一位
  - ⬇️ 下移一位
  - ⏫ 移到顶部
  - ⏬ 移到底部
- 确认后保存排序，下次启动时按新顺序执行

### 使用场景

#### 场景1：每日开始工作
```
1. 打开 MarginNote
2. 单击"快速启动"按钮
3. 自动在浮窗显示今天最重要的任务
4. 开始专注工作
```

#### 场景2：多任务切换
```
1. 长按"快速启动"→"选择并启动任务"
2. 从列表中选择要切换的任务
3. 快速切换到新任务的工作环境
```

#### 场景3：关联外部工具
```
1. 复制 Obsidian 笔记链接
2. 长按"快速启动"→"更新启动链接"
3. 自动识别并保存链接
4. 下次单击即可打开 Obsidian 笔记
```

### 最佳实践

1. **为动作任务设置启动链接**
   - 编程任务：链接到 IDE 或代码仓库
   - 写作任务：链接到文档或笔记软件
   - 学习任务：链接到课程或教材

2. **合理安排任务优先级**
   - 高优先级任务自动排在前面
   - 使用手动排序微调执行顺序
   - 保持进行中任务数量在 3-5 个

3. **配合今日看板使用**
   - 每天早上刷新今日看板
   - 标记今日要完成的任务
   - 通过快速启动逐个执行

### 注意事项

- 启动链接格式：`[链接文本](URL)`
- 手动排序信息保存在"排序"字段中
- 排序优先级：手动排序 > 智能排序
- 浮窗显示适合查看任务详情和相关笔记

## 任务筛选与排序

### 预设筛选器
1. **🔥 重要且紧急**：高优先级 + 紧急度70分以上
2. **📅 今日任务**：标记了今日标签的任务
3. **⏰ 即将到期**：3天内到期的任务
4. **⚠️ 已逾期**：超过截止日期未完成
5. **📌 高优先级未完成**：高优先级且未完成的任务
6. **📊 本周任务**：本周内需要完成的任务
7. **🔍 停滞任务**：7天未更新的进行中任务
8. **✅ 待归档任务**：已完成但未归档的任务

### 自定义筛选
可以组合多个条件：
- 状态：未开始/进行中/已完成/已归档
- 优先级：高/中/低
- 标签：自定义标签
- 时间范围：指定起止日期
- 层级类型：顶层/叶子/父任务/独立任务

### 智能排序
**综合评分算法**：
- 优先级权重：30%
- 紧急度权重：30%
- 重要性权重：20%
- 进度权重：20%

**其他排序方式**：
- 按优先级排序
- 按日期排序（最早的在前）
- 按状态排序（进行中优先）
- 按层级排序（目标→动作）

## 批量操作功能

### 基础批量操作
1. **批量更新状态**：统一修改多个任务的状态
2. **批量设置优先级**：统一设置高/中/低优先级
3. **批量标记今日任务**：快速规划今日工作
4. **批量移动到看板**：整理任务到不同看板

### 高级批量操作
1. **批量添加标签**：为任务分组打标签
2. **批量设置截止日期**：统一设置 deadline
3. **批量归档已完成**：清理已完成的任务
4. **批量解除父任务链接**：解除任务间的关系

### 操作确认机制
- 重要操作会要求确认
- 显示操作结果：成功/失败数量
- 错误任务会记录原因

## 看板管理

### 看板类型
1. **目标看板**：存放所有目标
2. **项目看板**：存放所有项目
3. **动作看板**：存放具体动作
4. **已完成看板**：存放已完成任务
5. **今日看板**：存放今日任务

### 看板配置
在设置面板中可以：
- 绑定看板笔记
- 聚焦到指定看板
- 清空看板绑定
- 粘贴笔记 ID

### 看板使用流程
1. 创建一个笔记作为看板
2. 在设置中绑定该笔记
3. 任务会自动归类到对应看板
4. 支持手动移动任务到看板

## 任务分析与建议

### 任务统计
自动统计：
- 任务总数
- 各状态任务数量
- 各优先级分布
- 逾期任务数
- 今日到期数

### 智能建议
系统会分析并建议：
1. **紧急任务**：需要立即处理的任务
2. **可开始任务**：没有依赖，可以开始的任务
3. **需回顾任务**：长时间停滞的任务
4. **可归档任务**：已完成可以归档的任务
5. **需规划任务**：高优先级但无日期的任务

### 任务依赖检查
- 自动检测任务间的依赖关系
- 提示哪些任务被阻塞
- 建议先完成的前置任务

## 读书任务管理

MNTask v0.6.12 引入了专为学生设计的**灵活读书任务拆分系统**，支持渐进式任务创建和动态调整。

### 核心特性

1. **渐进式拆分**：不一次性创建所有任务，避免计划僵化
2. **动态调整**：根据实际完成情况自动调整后续计划
3. **灵活策略**：支持章节拆分、页码拆分、学习模板等多种方式
4. **智能分析**：自动分析进度并提供优化建议

### 拆分方式详解

#### 1. 按章节拆分 📚

适用于有明确章节结构的书籍，支持多层级章节管理。

**使用方法**：
1. 选择要拆分的读书任务
2. 点击"任务拆分"按钮 → "按章节拆分"
3. 选择拆分方式：
   - **简单拆分**：输入章节范围（如1-10）
   - **章节结构**：支持子章节（开发中）
   - **学习模板**：使用预设的学习阶段

**示例效果**：
```
📁 【项目】阅读《深度学习》
├── ▶️ 【动作】阅读第1章
├── ▶️ 【动作】阅读第2章
├── ▶️ 【动作】阅读第3章
└── ...
```

#### 2. 按页码渐进式拆分 📄

最灵活的拆分方式，特别适合需要根据进度调整的情况。

**使用方法**：
1. 选择读书任务，点击"按页数拆分"
2. 输入书籍总页数（如500页）
3. 设置每日阅读页数（默认20页）
4. 选择创建策略：
   - 创建3天任务（推荐）✅
   - 创建5天任务
   - 创建7天任务
   - 创建所有任务

**关键特性**：
- **进度追踪**：自动记录当前页码进度
- **智能调整**：根据历史完成率调整每日页数
- **今日标记**：第一个任务自动标记为今日任务

**示例效果**：
```
📁 【项目】阅读《算法导论》
├── ▶️ 【动作】阅读 P1-20  📅今日 🔴高
├── ▶️ 【动作】阅读 P21-40  🟡中
├── ▶️ 【动作】阅读 P41-60  🟡中
└── 信息：进度: 0/500页 (0%)，预计还需25天完成
```

#### 3. 学习任务模板 📖

为不同类型的学习任务提供最佳实践模板。

**标准学习模板**：
1. 预读：浏览目录和概要（中优先级）
2. 精读：深入理解核心概念（高优先级）
3. 总结：整理笔记和要点（高优先级）
4. 复习：巩固关键知识（中优先级）
5. 应用：完成练习或项目（高优先级）

**技术学习模板**：
1. 概览：了解技术背景（低优先级）
2. 环境：搭建开发环境（高优先级）
3. 示例：运行官方示例（中优先级）
4. 实践：编写测试代码（高优先级）
5. 项目：完成小型项目（高优先级）
6. 总结：编写学习笔记（中优先级）

**考试准备模板**：
1. 诊断：做诊断测试（高优先级）
2. 基础：复习基础知识（高优先级）
3. 重点：攻克重难点（高优先级）
4. 练习：大量刷题（高优先级）
5. 模拟：全真模拟考试（高优先级）
6. 查漏：补充薄弱环节（中优先级）

### 动态调整机制

系统会自动分析任务完成情况并提供调整建议：

**分析维度**：
- 完成率：已完成任务占比
- 逾期情况：是否有任务超期
- 进度趋势：实际vs计划进度
- 今日分配：是否有今日任务

**自动调整**：
1. **逾期任务多**→ 建议减少每日任务量
2. **完成率高**（>80%）→ 可增加每日任务量
3. **今日无任务**→ 自动分配下一个未开始任务

**使用方法**：
- 在已有拆分的任务上再次使用"按页数拆分"
- 系统会检测现有进度并提供分析
- 选择"是否分析并调整计划"

### 最佳实践建议

#### 1. 初次规划
- 先创建3天的任务，不要一次规划太远
- 根据书籍难度合理设置每日页数
- 技术书籍：10-15页/天
- 文学作品：30-50页/天
- 教科书籍：15-25页/天

#### 2. 持续调整
- 每完成2-3个任务后评估进度
- 根据实际情况调整后续计划
- 利用系统的自动分析功能

#### 3. 配合其他功能
- 使用"今日任务"系统管理每日阅读
- 设置优先级区分重要章节
- 添加笔记链接记录读书笔记

#### 4. 常见场景

**场景1：考试复习**
```
1. 创建主任务：【目标】通过算法考试
2. 使用考试模板创建阶段任务
3. 对"练习"阶段按章节拆分刷题任务
4. 每日标记3-5个题目为今日任务
```

**场景2：技术学习**
```
1. 创建主任务：【项目】学习React框架
2. 使用技术模板创建学习路径
3. 对"实践"阶段按功能模块拆分
4. 配合启动链接直接打开IDE
```

**场景3：读书计划**
```
1. 创建主任务：【项目】阅读《人类简史》
2. 按页码渐进式拆分（每天30页）
3. 每3天创建一次新任务
4. 根据实际进度动态调整
```

### 注意事项

1. **避免过度规划**：不要一次创建太多任务
2. **及时更新状态**：完成后立即标记，便于系统分析
3. **合理设置优先级**：重要章节设置高优先级
4. **记录学习笔记**：利用MarginNote的笔记功能
5. **定期回顾调整**：每周回顾并调整计划

## 自定义字段管理 📋

### 字段管理统一入口

MNTask v0.6.13 新增了强大的字段管理功能，让你可以灵活组织任务卡片的信息结构。

#### 主要功能

1. **📝 添加新字段**
   - 自动添加到信息字段的最上方（紧挨着信息字段）
   - 两步操作：输入字段名 → 输入内容
   - 无需选择位置，简化操作流程

2. **✏️ 编辑现有字段**
   - 快速修改已有字段的内容
   - 保持字段格式和样式

3. **📋 管理字段内容**
   - **多选支持**：可以同时选择多个字段或评论
   - **移动功能**：选择精确的目标位置（字段前后或信息字段顶部/底部）
   - **删除功能**：批量删除不需要的内容
   - **平铺显示**：直接显示所有内容，一目了然

#### 使用方法

1. **访问字段管理**
   - 选中任务卡片
   - 长按"任务管理"按钮
   - 在"字段处理"菜单中选择"📋 字段管理"

2. **添加自定义字段的步骤**
   - 第一步：输入字段名称
   - 第二步：输入字段内容（可选）
   - 自动添加到信息字段最上方

3. **管理字段内容的流程**
   - 选择"管理字段内容"
   - 在单一对话框中查看所有内容并多选
   - 选择"移动"或"删除"操作
   - 如果选择移动，可精确选择在某个字段前后的位置

#### 实际应用场景

1. **项目信息整理**
   - 添加"负责人"、"截止日期"等自定义字段
   - 将相关信息移动到对应字段下

2. **学习任务管理**
   - 添加"学习资料"、"练习题目"等字段
   - 灵活组织学习内容

3. **会议记录整理**
   - 添加"决议事项"、"待办事项"等字段
   - 快速归类会议内容

#### 注意事项

1. 字段管理功能仅适用于任务卡片
2. 删除操作不可恢复，请谨慎使用
3. 移动内容时会保持原有格式
4. 支持批量操作，提高效率

## 任务记录系统 📝

从 v0.6.15 开始，MNTask 引入了全新的任务记录系统，让您可以详细跟踪每个任务的执行过程。

### 核心功能

#### 1. 任务记录
- **时间戳记录**：每条记录自动添加时间戳
- **进度追踪**：可选的进度百分比记录
- **工作日志**：记录每个步骤的详细内容
- **历史查看**：完整的任务执行历史

#### 2. 使用方法

##### 添加任务记录
1. 选中任务卡片
2. 长按"进度追踪"按钮
3. 选择"📝 添加任务记录"
4. 输入工作内容和进度

##### 快速记录
使用"⚡ 快速记录"功能，提供常用记录模板：
- ✅ 完成一个步骤
- 🚧 遇到问题
- 💡 发现新思路
- 🔄 切换方案
- ⏸️ 暂停工作
- ▶️ 继续工作
- 🎯 达到里程碑

##### 查看历史记录
1. 选择"📊 查看任务记录"
2. 查看完整的时间线
3. 支持导出记录到剪贴板

### 记录格式

```
📝 任务记录
├── 2025-01-08 10:30 | 开始设计数据结构 | 进度: 10%
├── 2025-01-08 14:20 | 完成基础框架搭建 | 进度: 35%
├── 2025-01-08 16:00 | 遇到问题：性能优化需要重新设计 | 进度: 40%
└── 2025-01-08 18:30 | 问题解决，功能测试通过 | 进度: 75%
```

### 进度管理
- **自动更新**：记录时可同步更新任务总进度
- **进度字段**：在任务卡片显示当前进度
- **智能提示**：根据进度提供任务完成建议

### 应用场景

#### 1. 软件开发
```
10:00 | 分析需求文档 | 10%
11:30 | 设计系统架构 | 25%
14:00 | 编写核心模块 | 50%
16:30 | 调试并修复bug | 70%
18:00 | 完成单元测试 | 90%
```

#### 2. 学习任务
```
09:00 | 开始阅读第3章 | 30%
10:30 | 完成章节笔记 | 40%
14:00 | 做课后练习题 | 55%
16:00 | 复习重点内容 | 70%
```

#### 3. 项目管理
```
周一 | 项目启动会议 | 5%
周二 | 完成需求分析 | 20%
周三 | 设计方案评审 | 35%
周四 | 开始实施阶段 | 50%
```

### 最佳实践

1. **及时记录**：完成重要步骤后立即记录
2. **详细描述**：记录关键决策和遇到的问题
3. **定期回顾**：通过历史记录优化工作流程
4. **进度同步**：保持记录进度与实际进度一致

### 注意事项

- 任务记录会作为评论保存在任务卡片中
- 记录内容支持 Markdown 格式
- 导出功能方便生成工作报告
- 建议为重要任务保持详细记录

## 快捷操作

### 工具栏按钮（v0.6.16 精简版）
1. **任务制卡**：
   - 单击：智能任务制卡（根据父卡片自动推断类型）
   - 长按：任务管理菜单（制卡、修改类型、批量制卡、更新子卡片）
   
2. **状态切换**：
   - 单击：推进任务状态（向前）
   - 长按：进度管理菜单（推进状态、退回状态）
   
3. **今日任务**：
   - 单击：标记/取消今日任务
   - 长按：今日任务菜单（优先级设置、聚焦看板、刷新看板、处理过期任务）
   
4. **筛选排序**：
   - 单击：打开任务筛选器
   - 长按：筛选菜单（排序、批量操作、预设筛选）
   
5. **看板视图**：
   - 单击：聚焦今日看板
   - 长按：看板菜单（任务脑图、统计、数据导出）
   
6. **字段管理**：
   - 单击：快速添加字段
   - 长按：字段菜单（字段管理、任务记录、启动链接）
   
7. **快速启动**：
   - 单击：自动启动第一个进行中任务
   - 长按：启动菜单（选择任务启动、更新启动链接、调整任务顺序）

### 键盘快捷键
（需要在 MarginNote 中设置）
- 快速创建任务
- 切换任务状态
- 标记今日任务

## 使用技巧

### 1. 任务规划流程
```
创建目标 → 分解为关键结果 → 创建项目 → 拆分为动作
```

### 2. 日常使用流程
```
早上：筛选本周任务 → 标记今日任务 → 设置优先级
工作中：更新任务状态 → 记录进展
晚上：回顾今日完成 → 归档已完成 → 规划明日
```

### 3. 周期性整理
- **每日**：更新今日看板，归档完成任务
- **每周**：分析任务报告，调整优先级
- **每月**：回顾目标进展，调整关键结果

### 4. 最佳实践
1. **任务粒度**：动作应该是 1-4 小时可完成的
2. **及时更新**：状态变化及时更新
3. **定期清理**：已完成的任务及时归档
4. **合理分类**：充分利用标签系统
5. **依赖管理**：明确标注任务间的依赖关系

### 5. 注意事项
- 任务标题不要过长，详细信息放在评论中
- 重要任务设置截止日期
- 利用颜色区分不同类型的任务
- 定期使用任务分析功能，及时调整计划

## 更新日志

### v0.7.0 (2025-01)
- **新增快速启动功能**：
  - 新增第7个工具栏按钮"快速启动"，帮助用户快速开始进行中的任务
  - 单击自动启动今日看板中第一个进行中的任务
  - 支持智能识别启动链接类型（卡片链接、UI状态链接、外部URL）
  - 长按显示更多选项：选择任务启动、更新启动链接、调整任务顺序

- **启动链接智能处理**：
  - 卡片链接：直接定位到目标卡片
  - UI状态链接：在浮窗中显示任务内容
  - 外部URL：打开对应的应用或网页
  
- **任务排序功能**：
  - 支持手动调整今日看板中进行中任务的顺序
  - 通过交互式界面上下移动任务或移到顶部/底部
  - 排序信息保存在"排序"字段中，优先于智能排序
  
- **剪贴板链接识别**：
  - 更新启动链接时自动识别剪贴板内容
  - 支持卡片ID（32位字符串）自动转换为URL
  - 支持识别 MarginNote URL 和外部网址
  - 智能提取域名作为链接文本

- **技术改进**：
  - 新增 `MNTaskManager.getLinkType()` 方法判断链接类型
  - 新增 `MNTaskManager.addLaunchField()` 方法添加启动字段
  - 增强了 `sortTodayTasks()` 方法，支持手动排序优先
  - 改进了 `addOrUpdateLaunchLink()` 方法，支持更多应用

### v0.6.26 (2025-01)
- **代码质量改进**：
  - 为核心功能添加了 try-catch 错误处理（taskCardMake、toggleTaskStatusForward、toggleTodayMark）
  - 增强了错误日志记录，便于调试和问题定位
  - 提升了插件稳定性，避免单个功能错误导致插件崩溃
- **技术优化**：
  - 统一了错误提示格式，提供更友好的用户反馈
  - 添加了详细的错误日志输出，方便开发者调试
  - 确保关键操作在出错时能够优雅降级

### v0.6.23 (2025-01)
- **修复问题**：
  - 修复今日看板中过期任务提醒重复显示的问题
- **技术细节**：
  - 在 `clearTaskLinksFromBoard` 函数中添加了清理过期任务提醒的逻辑
  - 现在刷新今日看板时会先清理旧的过期任务提醒，再添加新的
  - 避免了多次刷新导致的重复显示问题

### v0.6.22 (2025-01)
- **修复问题**：
  - 修复设置任务优先级功能没有弹出选择对话框的问题
  - 修复优先级字段显示 "undefined" 的错误
  - 修复字段管理菜单中任务记录功能不显示的问题
- **改进**：
  - 增强了 setTaskPriority 功能的错误处理和参数验证
  - 添加了详细的调试日志，帮助定位问题
  - 在 MNTaskManager.setTaskPriority 中增加了参数验证，防止无效值被写入
  - 修正菜单分隔符的实现方式，使用纯字符串代替对象形式
- **技术细节**：
  - 加强了对 MNUtil.userSelect 返回值的验证
  - 确保只有有效的优先级值（高/中/低）才能被设置
  - 菜单分隔符从 `{action: "separator", menuTitle: "──────────"}` 改为纯字符串 `"──────────"`

### v0.6.21 (2025-01)
- **菜单重组**：
  - 将任务记录功能从"状态切换"按钮移到"字段管理"按钮
  - 状态切换按钮现在更精简，只保留状态推进和退回功能
  - 字段管理按钮功能增强，包含字段管理和任务记录两大类功能
- **优化理由**：
  - 任务记录本质上是管理任务卡片的字段内容，放在字段管理中更合理
  - 状态切换按钮符合单一职责原则，专注于状态变更
  - 功能分组更清晰，提升用户体验
- **字段管理菜单新布局**：
  - 字段操作：添加字段、编辑字段、字段管理
  - 任务记录：添加记录、查看记录、更新进度
  - 其他功能：启动链接管理

### v0.6.20 (2025-01)
- **功能改进**：
  - **过期任务功能增强**：
    - 在今日任务菜单中添加「处理过期任务」选项，更容易找到
    - 今日看板现在直接显示过期任务列表，而不仅仅是数量
    - 过期任务显示具体标题和过期天数，一目了然
  - **筛选功能统一化**：
    - 所有筛选功能现在统一使用 TaskFilterEngine，从看板筛选而非整个笔记本
    - 统一使用 showFilterResultsMenu 展示筛选结果，提供一致的用户体验
    - 修复了旧筛选方法包含非任务笔记的问题
- **代码改进**：
  - 全面统一项目中所有评论添加使用 appendMarkdownComment 而非 appendTextComment
  - 改进了任务记录、推迟记录、场景设置等功能的评论格式
  - 提升了评论内容的可读性和一致性
  - 统一了 utils.js 和 webviewController.js 中的评论添加方式
- **受影响功能**：
  - 创建今日聚焦/Inbox 时的说明评论
  - 任务推迟记录的格式
  - 动作任务场景设置的评论
  - 通用文本替换功能中的评论添加
  - WebView 控制器中的评论操作

### v0.6.19 (2025-01)
- **修复问题**：
  - 修复 MNUtil.input API 使用错误导致的 "can't find NS..." 报错
  - 修复 MNUtil.copyText 不存在的问题，改为使用 MNUtil.copy
  - 修正所有任务记录相关输入框的 API 调用方式
  - 修正任务拆分、批量操作、时间设置等功能中的 MNUtil.input 调用错误
- **API 修正**：
  - MNUtil.input 第三个参数必须是按钮数组，如 ["取消", "确定"]
  - 返回值是对象 {input: text, button: index}，需要正确处理
  - 修复了整个项目中所有错误的 MNUtil.input 使用（共计10+处）

### v0.6.18 (2025-01)
- **修复问题**：
  - 修复任务记录功能无法正常工作的问题
  - 修复任务记录字段匹配失败导致记录无法添加的问题
  - 改进任务记录相关功能的错误处理和日志记录
- **代码优化**：
  - 统一任务记录字段名称，确保字段查找和移动操作的一致性
  - 增强了 addTaskLog、viewTaskLogs、updateTaskProgress 等功能的稳定性

### v0.6.17 (2025-01)
- **代码优化**：
  - 移除对 MNMath 扩展类的依赖
  - 将 `toNoExcerptVersion` 功能整合到 taskUtils 中，提高代码独立性和可维护性

### v0.6.16 (2025-01)
- **界面精简**：工具栏按钮从 10 个精简到 6 个核心功能
- **菜单优化**：
  - 移除未实现功能，保留已开发的核心功能
  - 支持单击和长按操作，提升使用效率
  - 菜单内容更聚焦，查找功能更快速
- **新增字段管理按钮**：统一字段操作入口
- **改进用户体验**：
  - 按钮功能更明确（任务制卡、状态切换、今日任务、筛选排序、看板视图、字段管理）
  - 单击执行常用操作，长按显示更多选项
- **删除功能**：
  - 移除项目看板、动作看板、高级筛选等未完成功能
  - 保留使用 MNTaskManager 和 TaskFieldUtils 的核心功能

### v0.6.15 (2025-01)
- **新增**：任务记录系统
  - 时间戳自动记录每个工作步骤
  - 支持进度百分比追踪
  - 快速记录模板（问题、思路、里程碑等）
  - 历史记录查看和导出
- **新增**：任务进度管理
  - 自动更新总体进度
  - 进度字段显示
  - 基于记录的进度计算
- **优化**：菜单系统增加任务记录入口

### v0.6.14 (2025-01)
- **新增**：今日任务过期处理系统
  - 自动检测过期的今日任务
  - 提供多种处理方式（保持/标记过期/更新日期/移除）
  - 支持批量处理或逐个处理
- **优化**：今日字段自动记录标记日期
- **新增**：过期任务专用字段显示
- **优化**：刷新今日看板时自动提示处理过期任务

### v0.6.25 (2025-01)
- **修复**：过期任务点击"今日"按钮时的双重标记问题
  - 现在添加今日标记时会自动移除过期标记
  - 避免任务同时显示"过期X天"和"今日"两个标记

### v0.6.24 (2025-01)
- **优化**：简化过期任务显示方式
  - 过期任务现在与其他任务统一使用行内链接格式
  - 移除冗余的过期任务提醒文字
  - 过期任务显示为：`🎯⚠️ [任务内容 (过期X天)](链接)`
  - 过期任务作为独立分组，优先显示在看板顶部

### v0.6.23 (2025-01)
- **修复**：清理今日看板时正确删除过期任务提醒内容
- **修复**：避免过期任务提醒重复累积

### v0.6.22 (2025-01)
- **修复**：设置任务优先级功能弹窗显示问题
- **改进**：增加优先级设置的错误处理和调试信息

### v0.6.21 (2025-01)
- **改进**：将任务记录功能移至字段管理按钮中
- **优化**：重新组织菜单结构，提升操作逻辑性

### v0.6.13 (2025-01)
- **新增**：字段管理统一入口（manageCustomFields）
- **简化**：自定义字段自动添加到信息字段顶部，无需选择位置
- **新增**：字段内容多选管理功能
- **新增**：支持批量移动和删除字段内容
- **优化**：字段内容平铺显示，操作更直观
- **优化**：移动位置选择更精确（字段前后）

### v0.6.12 (2025-01)
- **今日看板优化**：
  - 改为链接引用模式，不再移动任务本身
  - 添加任务类型图标显示（🎯📊📁▶️）
  - 修复重复内容问题
- **读书任务管理系统**：
  - 支持按章节拆分（含多层级）
  - 按页码渐进式拆分（不一次拆完）
  - 动态调整机制（根据进度自动优化）
  - 三种学习模板（标准/技术/考试）
- **智能制卡优化**：
  - 自动推断任务类型（目标→关键结果→项目）
  - 减少不必要的类型选择对话框

### v0.0.0 (初始版本)
- 基础任务管理功能
- OKR 层级系统（目标、关键结果、项目、动作）
- 任务状态管理（未开始、进行中、已完成、已归档）
- 今日任务系统
- 智能筛选引擎
- 批量操作功能
- 任务分析与建议
- 看板管理

---

💡 **提示**：MNTask 会持续更新，建议关注项目更新以获取最新功能。


## TODO

### 拆分任务功能

#### 根据目录拆分

1. 手动复制目录信息的 OCR 内容？
2. 让 AI 根据目录信息固定内容样式
3. 然后让插件来拆分

（后续）能否从 API 获取到目录信息？